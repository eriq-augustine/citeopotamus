

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:foaf="http://xmlns.com/foaf/0.1/"
      xmlns:dc="http://purl.org/dc/terms/"
      xmlns:doi="http://dx.doi.org/"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema-datatypes#"
      lang="en" xml:lang="en"
      itemscope itemtype="http://schema.org/Article">

<head>
   <title>PLOS Computational Biology: The Layer-Oriented Approach to Declarative Languages for Biological Modeling</title>



<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9" />

<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
<link rel="home" title="home" href="/home.action;jsessionid=734E990AC55F108B50EDD423F8918A06" />
<link rel="alternate" type="application/rss+xml"
  title="PLOS Computational Biology: New Articles"
  href="http://www.ploscompbiol.org/article/feed" />

<link rel="pingback" href="http://www.ploscompbiol.org/pingback" />


<!-- global_css.ftl -->
<link rel="stylesheet" type="text/css" media="screen" href="/css/dojo/dijit/themes/tundra/tundra.css?v=zwugcxLdpBWmb72qqlHgGyeNAGM" />
<link rel="stylesheet" type="text/css" media="all" href="/css/star_rating.css?v=Mm3HyaUPUahAJAq6xG5W3tdF7Hk" />
<link rel="stylesheet" type="text/css" media="all" href="/css/rating.css?v=AOT9rozE9sYVjGTdeiyxHf18Ykw" />
<link rel="stylesheet" type="text/css" media="all" href="/css/screen.css?v=KBNFqBmhD635U0NgiM5tf9dtxRE" />
<link rel="stylesheet" type="text/css" media="all" href="/css/iepc.css?v=FIjyR83BhSovq_5yNVk1Sih60AI" />
<link rel="stylesheet" type="text/css" media="all" href="/css/journal.css?v=SiREXztjNSUsOyrlkE9sv028Y+0" />
<link rel="stylesheet" type="text/css" media="all" href="/css/lightBox.css?v=sDgsUXamFoYAakEshdj0YWrZiiQ" />
<link rel="stylesheet" type="text/css" media="print" href="/css/print.css?v=0T+LTV7Gd0jtHEhqEvBfSrmHUGg" />

<!--chartbeat --> 
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>


<!--[if IE]><![endif]-->
<meta name="description" content="PLOS Computational Biology is an open-access" />

<meta name="keywords" content="plos computational biology" />

  <meta name="citation_publisher" content="Public Library of Science" />
  <meta name="citation_doi" content="10.1371/journal.pcbi.1002521" />
    <meta name="citation_title" content="The Layer-Oriented Approach to Declarative Languages for Biological Modeling"/>
    <meta itemprop="name" content="The Layer-Oriented Approach to Declarative Languages for Biological Modeling"/>

      <meta name="citation_author" content="Ivan Raikov" />
          <meta name="citation_author_institution" content="Okinawa Institute of Science and Technology, Onna-son, Okinawa, Japan" />
          <meta name="citation_author_institution" content="University of Antwerp, Antwerp, Belgium" />
      <meta name="citation_author" content="Erik De Schutter" />
          <meta name="citation_author_institution" content="Okinawa Institute of Science and Technology, Onna-son, Okinawa, Japan" />
          <meta name="citation_author_institution" content="University of Antwerp, Antwerp, Belgium" />

    <meta name="citation_date" content="2012/5/17"/>

  <meta name="citation_pdf_url" content="http://dx.plos.org/10.1371/journal.pcbi.1002521.pdf" />

    <meta name="citation_journal_title" content="PLOS Computational Biology" />
    <meta name="citation_firstpage" content="e1002521"/>
    <meta name="citation_issue" content="5"/>
    <meta name="citation_volume" content="8"/>
    <meta name="citation_issn" content="1553-7358"/>

    <meta name="citation_journal_abbrev" content="PLoS Comput Biol" />

      <meta name="citation_reference" content="citation_title=Interoperability of neuro-science modeling software: Current status and future directions.; citation_author=R Cannon; citation_author=MO Gewaltig; citation_author=P Gleeson; citation_author=U Bhalla; citation_author=H Cornelis; citation_journal_title=Neuroinformatics; citation_volume=5; citation_number=1; citation_pages=127-138; citation_date=2007; " />
      <meta name="citation_reference" content="citation_title=Why are computational neuroscience and systems biology so separate?; citation_author=E De Schutter; citation_journal_title=PLoS Comput Biol; citation_volume=4; citation_number=2; citation_pages=e1000078; citation_date=2008; " />
      <meta name="citation_reference" content="citation_author=J Bower; citation_author=D Beeman; citation_title=The Book of GENESIS: Exploring Realistic Neural Models with the GEneral NEural SImulation System; citation_number=3; citation_date=1998; citation_publisher=Springer-Verlag; " />
      <meta name="citation_reference" content="citation_author=N Carnevale; citation_author=M Hines; citation_title=The NEURON Book; citation_number=4; citation_date=2006; citation_publisher=Cambridge University Press; " />
      <meta name="citation_reference" content="citation_title=A quantitative description of membrane current and its application to conduction and excitation in nerve.; citation_author=A Hodgkin; citation_author=A Huxley; citation_journal_title=J Physiol; citation_volume=117; citation_number=5; citation_pages=500-544; citation_date=1952; " />
      <meta name="citation_reference" content="citation_title=NeuroML: A language for describing data driven models of neurons and networks with a high degree of biological detail.; citation_author=P Gleeson; citation_author=S Crook; citation_author=R Cannon; citation_author=M Hines; citation_author=G Billings; citation_journal_title=PLoS Comput Biol; citation_volume=6; citation_number=6; citation_pages=e1000815; citation_date=2010; " />
      <meta name="citation_reference" content="citation_title=Towards NeuroML: Model description methods for collaborative modeling in neuroscience.; citation_author=N Goddard; citation_author=M Hucka; citation_author=F Howell; citation_author=H Cornelis; citation_author=K Shankar; citation_journal_title=Philos Trans R Soc Lond B Biol Sci; citation_volume=356; citation_number=7; citation_pages=1209-1228; citation_date=2001; " />
      <meta name="citation_reference" content="citation_title=Sys- tems biology markup language (SBML) Level 3 Version 1 Core.; citation_author=M Hucka; citation_author=F Bergmann; citation_author=S Hoops; citation_author=S Keating; citation_author=S Sahle; citation_number=8; citation_date=2010; " />
      <meta name="citation_reference" content="citation_title=Evolving a lingua franca and associated software infrastructure for computational systems biology: the systems biology markup language (SBML) project.; citation_author=M Hucka; citation_author=A Finney; citation_author=B Bornstein; citation_author=S Keating; citation_author=B Shapiro; citation_journal_title=Syst Biol; citation_volume=1; citation_number=9; citation_pages=41-53; citation_date=2004; " />
      <meta name="citation_reference" content="citation_title=CellML 1.1 for the definition and exchange of biological models.; citation_author=A Cuellar; citation_author=P Nielsen; citation_author=D Bullivant; citation_author=P Hunter; citation_title=Proceedings of the 5th IFAC Symposium on Modelling and Control in Biomedical Systems; citation_number=10; citation_pages=451-456; citation_date=2003; " />
      <meta name="citation_reference" content="citation_title=CellML specification version 1.1.; citation_author=A Cuellar; citation_author=P Nielsen; citation_author=M Hallstead; citation_author=D Bullivant; citation_author=D Nickerson; citation_number=11; citation_date=2002; " />
      <meta name="citation_reference" content="citation_title=The promise and shortcomings of XML as an interchange format for computational models of biology.; citation_author=I Raikov; citation_author=E De Schutter; citation_journal_title=Neuroinformatics; citation_volume=10; citation_number=12; citation_pages=1-3; citation_date=2012; " />
      <meta name="citation_reference" content="citation_title=SED-ML – An XML Format for the Implementation of the MIASE Guidelines.; citation_author=D Koehn; citation_author=N Novere; citation_title=Computational Methods in Systems Biology; citation_number=13; citation_pages=176-190; citation_date=2008; citation_publisher=Springer; " />
      <meta name="citation_reference" content="citation_title=A simple nested simulation for SED-ML.; citation_author=F Bergmann; citation_number=14; citation_date=2010; " />
      <meta name="citation_reference" content="citation_title=The International Neuroinformatics Coordinating Facility: evaluating the first years.; citation_author=E De Schutter; citation_journal_title=Neuroinformatics; citation_volume=7; citation_number=15; citation_pages=161-163; citation_date=2009; " />
      <meta name="citation_reference" content="citation_title=Multiple ontologies in action: Composite annotations for biosimulation models.; citation_author=J Gennari; citation_author=M Neal; citation_author=M Galdzicki; citation_author=D Cook; citation_journal_title=J Biomed Inform; citation_volume=44; citation_number=16; citation_pages=146-154; citation_date=2011; " />
      <meta name="citation_reference" content="citation_title=XML in Scheme, version 3.0.; citation_author=O Kiselyov; citation_number=17; citation_date=2004; " />
      <meta name="citation_reference" content="citation_title=Code generation: a strategy for neural network simulators.; citation_author=D Goodman; citation_journal_title=Neuroinformatics; citation_volume=8; citation_number=18; citation_pages=183-196; citation_date=2010; " />
      <meta name="citation_reference" content="citation_title=Facilitating modularity and reuse: guidelines for structuring CellML 1.1 models by isolating common biophysical concepts.; citation_author=S Wimalaratne; citation_author=M Halstead; citation_author=C Lloyd; citation_author=M Cooling; citation_author=E Crampin; citation_journal_title=Exp Physiol; citation_volume=94; citation_number=19; citation_pages=472-485; citation_date=2009; " />
      <meta name="citation_reference" content="citation_title=The contribution of resurgent sodium current to high- frequency firing in Purkinje neurons: An experimental and modeling study.; citation_author=Z Khaliq; citation_author=N Gouwens; citation_author=I Raman; citation_journal_title=J Neurosci; citation_volume=23; citation_number=20; citation_pages=4899-4912; citation_date=2003; " />
      <meta name="citation_reference" content="citation_title=Determining K+ channel activation curves from K+ channel currents often requires the Goldman-Hodgkin-Katz equation.; citation_author=J Clay; citation_journal_title=Front Cell Neurosci; citation_volume=3; citation_number=21; citation_pages=20; citation_date=2009; " />
      <meta name="citation_reference" content="citation_title=Calcium dynamics in large neuronal models.; citation_author=E De Schutter; citation_author=P Smolen; citation_title=Methods in neuronal modeling: From ions to networks. 2nd edition; citation_number=22; citation_pages=211-250; citation_date=1998; citation_publisher=MIT Press; " />
      <meta name="citation_reference" content="citation_title=Simulation of intrinsic bursting in CA3 hippocampal neurons.; citation_author=R Traub; citation_journal_title=Neuroscience; citation_volume=7; citation_number=23; citation_pages=1233-1242; citation_date=1982; " />
      <meta name="citation_reference" content="citation_title=Accessing and integrating data and knowledge for biomedical research.; citation_author=A Burgun; citation_author=O Bodenreider; citation_journal_title=Yearb Med Inform; citation_volume=2008; citation_number=24; citation_pages=91-101; citation_date=2008; " />
      <meta name="citation_reference" content="citation_title=Modeling point neurons: From Hodgkin-Huxley to integrate-and-fire.; citation_author=N Brunel; citation_title=Computational Modeling Methods for Neuroscientists; citation_number=25; citation_pages=161-186; citation_date=2010; citation_publisher=MIT Press; " />
      <meta name="citation_reference" content="citation_title=Role of an A-type K+ conductance in the back- propagation of action potentials in the dendrites of hippocampal pyramidal neurons.; citation_author=M Migliore; citation_author=D Hoffman; citation_author=J Magee; citation_author=D Johnston; citation_journal_title=J Comput Neurosci; citation_volume=7; citation_number=26; citation_pages=5-15; citation_date=1999; " />
      <meta name="citation_reference" content="citation_title=Toward a mathematical semantics for computer languages.; citation_author=D Scott; citation_author=C Strachey; citation_title=Proceedings of the Symposium on Computers and Automata; citation_number=27; citation_pages=19-46; citation_date=1971; " />
      <meta name="citation_reference" content="citation_title=Induction, domains, calculi: Strachey's contributions to programming-language engineering.; citation_author=D Schmidt; citation_journal_title=Higher-Order and Symbolic Computation; citation_volume=13; citation_number=28; citation_pages=89-101; citation_date=2000; " />
      <meta name="citation_reference" content="citation_title=Cable theory for dendritic neurons.; citation_author=W Rall; citation_author=H Agmon-Snir; citation_title=Methods in neuronal modeling: From ions to networks. 2nd edition; citation_number=29; citation_pages=27-92; citation_date=1998; citation_publisher=MIT Press; " />
      <meta name="citation_reference" content="citation_title=Metalevel building blocks for modular systems.; citation_author=S Jagannathan; citation_journal_title=ACM Trans Program Lang Syst; citation_volume=16; citation_number=30; citation_pages=456-492; citation_date=1994; " />
      <meta name="citation_reference" content="citation_title=Stochastic simulation of chemical kinetics.; citation_author=D Gillespie; citation_journal_title=Annu Rev Phys Chem; citation_volume=58; citation_number=31; citation_pages=35-55; citation_date=2007; " />
      <meta name="citation_reference" content="citation_title=Approximate accelerated stochastic simulation of chemically reacting systems.; citation_author=D Gillespie; citation_journal_title=Annu Rev Phys Chem; citation_volume=115; citation_number=32; citation_pages=1716-1733; citation_date=2001; " />
      <meta name="citation_reference" content="citation_title=Stochastic p systems and the simulation of biochemical processes with dynamic compartments.; citation_author=A Spicher; citation_author=O Michel; citation_author=J Giavitto; citation_author=P Prusinkiewicz; citation_journal_title=Biosystems; citation_volume=91; citation_number=33; citation_pages=458-473; citation_date=2008; " />
      <meta name="citation_reference" content="citation_title=Reasoning about functional programs.; citation_author=L Paulson; citation_title=ML for the working programmer. 2nd edition; citation_number=34; citation_pages=213-256; citation_date=1996; citation_publisher=Cambridge University Press; " />
      <meta name="citation_reference" content="citation_title=Multi-paradigm declarative languages.; citation_author=M Hanus; citation_title=Proceedings of the 23rd International Conference on Logic Programming (ICLP); citation_number=35; citation_pages=45-75; citation_date=2007; citation_publisher=Springer-Verlag; " />
      <meta name="citation_reference" content="citation_title=Practical advantages of declarative programming.; citation_author=J Lloyd; citation_title=Proceedings of the 1994 Joint Conference on Declarative Programming, GULP-PRODE'94; citation_number=36; citation_pages=18-30; citation_date=1994; " />
      <meta name="citation_reference" content="citation_title=Stochastic ion channel gating in dendritic neurons: Morphology dependence and probabilistic synaptic activation of dendritic spikes.; citation_author=R Cannon; citation_author=C O'Donnell; citation_author=M Nolan; citation_journal_title=PLoS Comput Biol; citation_volume=6; citation_number=37; citation_pages=e1000886; citation_date=2010; " />
      <meta name="citation_reference" content="citation_title=Simulating, Analyzing, and Animating Dynamical Systems: A Guide to XPPAUT for Researchers and Students.; citation_author=B Ermentrout; citation_number=38; citation_date=2002; " />
      <meta name="citation_reference" content="citation_title=Systems biology markup language (SBML) Level 2 Version 4: Structures and facilities for model definitions.; citation_author=M Hucka; citation_author=A Finney; citation_author=S Hoops; citation_author=S Keating; citation_author=N Novere; citation_number=39; citation_date=2008; " />
      <meta name="citation_reference" content="citation_title=Specifications of insilicoML 1.0: A multilevel biophysical model description language.; citation_author=Y Asai; citation_author=Y Suzuki; citation_author=Y Kido; citation_author=H Oka; citation_author=E Heien; citation_journal_title=J Physiol Sci; citation_volume=58; citation_number=40; citation_pages=447-458; citation_date=2008; " />
      <meta name="citation_reference" content="citation_title=Addressing the problems with life-science databases for traditional uses and systems biology.; citation_author=S Philippi; citation_author=J Koehler; citation_journal_title=Nat Rev Genet; citation_volume=7; citation_number=41; citation_pages=482-488; citation_date=2006; " />
      <meta name="citation_reference" content="citation_title=PyNN: a common interface for neuronal network simulators.; citation_author=A Davison; citation_author=D Bruederle; citation_author=J Eppler; citation_author=J Kremkow; citation_author=E Muller; citation_journal_title=Front Neuroinform; citation_volume=2; citation_number=42; citation_pages=11; citation_date=2008; " />
      <meta name="citation_reference" content="citation_title=Lambda-calculus and combinators in the 20th century.; citation_author=F Cardone; citation_author=J Hindley; citation_title=Handbook of the History of Logic: Volume 5 – Logic From Russell to Church; citation_number=43; citation_pages=723-817; citation_date=2009; citation_publisher=Elsevier; " />
      <meta name="citation_reference" content="citation_author=R Milner; citation_author=M Tofte; citation_author=R Harper; citation_author=D MacQueen; citation_title=The Definition of Standard ML, Revised Edition; citation_number=44; citation_date=1997; citation_publisher=MIT Press; " />
      <meta name="citation_reference" content="citation_author=C Gunter; citation_title=Semantics of programming languages: structures and techniques; citation_number=45; citation_date=1992; citation_publisher=MIT Press; " />
      <meta name="citation_reference" content="citation_title=Notable design patterns for domain specific languages.; citation_author=D Spinellis; citation_journal_title=J Syst Softw; citation_volume=56; citation_number=46; citation_pages=9199; citation_date=2001; " />
      <meta name="citation_reference" content="citation_title=Revised report on the algorithmic language ALGOL 60.; citation_author=J Backus; citation_author=F Bauer; citation_author=J Green; citation_author=C Katz; citation_author=J McCarthy; citation_title=ALGOL-like Languages, Volume 1; citation_number=47; citation_pages=19-49; citation_date=1997; citation_publisher=Birkhauser; " />
      <meta name="citation_reference" content="citation_title=A universal scripting framework or Lambda: the ultimate “little language”.; citation_author=O Shivers; citation_title=Concurrency and Parallelism: Programming, Networking and Security; citation_number=48; citation_pages=254-265; citation_date=1996; citation_publisher=Springer-Verlag; " />



<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.ploscompbiol.org/article/fetchArticle.action?articleURI=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521">
   <license rdf:resource="http://creativecommons.org/licenses/by/2.5/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by/2.5/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
</License>
<rdf:Description
     rdf:about="http://www.ploscompbiol.org/article/fetchArticle.action?articleURI=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521"
     dc:identifier="http://www.ploscompbiol.org/article/fetchArticle.action?articleURI=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521"
     dc:title="PLOS Computational Biology: The Layer-Oriented Approach to Declarative Languages for Biological Modeling"
       trackback:ping="http://www.ploscompbiol.org/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521/trackback;jsessionid=734E990AC55F108B50EDD423F8918A06"
     />
</rdf:RDF>

-->
</head>
<body>
<span property="dc:language" content="en"></span>
<!-- begin : container -->
<div id="container">
  <!-- begin : top banner external ad space -->
  <div id="topBanner">


<!-- begin : left banner slot -->
<div class="left">
  <iframe id='affe494b' name='affe494b'
    src='http://ads.plos.org/www/delivery/afr.php?zoneid=84&amp;cb=4786'
    frameborder='0' scrolling='no' width='468' height='60'><a
    href='http://ads.plos.org/www/delivery/ck.php?n=affe494b&amp;cb=8968'
    target='_top'><img src='http://ads.plos.org/www/delivery/avw.php?zoneid=84&amp;cb=6321&amp;n=affe494b'
    border='0' alt='' /></a></iframe>
</div>
<!-- end : left banner slot -->
<!-- begin : right banner slot -->
<div class="right">
  <iframe id='af654bd5' name='af654bd5'
    src='http://ads.plos.org/www/delivery/afr.php?zoneid=85&amp;cb=9118'
    frameborder='0' scrolling='no' width='468' height='60'><a
    href='http://ads.plos.org/www/delivery/ck.php?n=af654bd5&amp;cb=3708'
    target='_top'><img src='http://ads.plos.org/www/delivery/avw.php?zoneid=85&amp;cb=2697&amp;n=af654bd5'
    border='0' alt='' /></a></iframe>
</div>
<!-- end : right banner slot -->

  </div>
  <!-- end : top banner external ad space -->

  <!-- begin : header -->
  <div id="hdr" class="login">

  <!-- begin : logo -->
  <div id="logo" title="PLOS Computational Biology"><a href="/home.action;jsessionid=734E990AC55F108B50EDD423F8918A06" title="PLOS Computational Biology"><span>PLOS Computational Biology</span></a></div>
  <!-- end : logo -->
  <!-- begin : user controls -->





  <div id="user">
    <div>
      <ul>
        <li><a href="/user/secure/secureRedirect.action?goTo=%2Farticle%2FfetchArticle.action%3FarticleURI%3Dinfo%253Adoi%252F10.1371%252Fjournal.pcbi.1002521" class="feedback"><strong>Login</strong></a> | </li>
        <li><a href="https://register.plos.org:443/ambra-registration/register.action">Create Account</a> | </li>
        <li class="feedback"><a href="/feedbackCreate.action?page=%252Farticle%252FfetchArticle.action%253FarticleURI%253Dinfo%25253Adoi%25252F10.1371%25252Fjournal.pcbi.1002521" title="Send us your feedback">Feedback</a></li>
      </ul>
    </div>
  </div>


  <!-- end : user controls -->
  <!-- begin search links -->
  <ul id="links"><li class="browse"><a href="/article/browse.action;jsessionid=734E990AC55F108B50EDD423F8918A06?field=date" title="Browse Articles">Browse</a></li><li class="rss"><a href="/static/rssFeeds.action;jsessionid=734E990AC55F108B50EDD423F8918A06" title="RSS Feeds">RSS</a></li></ul>
  <!-- end : search links -->
  <!-- begin : dashboard -->
  <div id="db">
    <form name="searchForm" action="/search/simpleSearch.action;jsessionid=734E990AC55F108B50EDD423F8918A06" method="get">
      <input type="hidden" name="from" value="globalSimpleSearch"/>
      <input type="hidden" name="filterJournals" value="PLoSCompBiol">
      <fieldset>
        <legend>Search</legend>
        <label for="search">Search</label>
        <div class="wrap"><input id="search" type="text" name="query" value="Search articles..." onfocus="if(this.value=='Search articles...')value='';" onblur="if(this.value=='')value='Search articles...';" class="searchField" alt="Search articles..."/></div>
        <input src="/images/search_btn1.gif" onclick="submit();" value="ftsearch" alt="SEARCH" tabindex="3" class="button" type="image" />
      </fieldset>
    </form>
    <form name="gasf" action="/search/advancedSearch.action;jsessionid=734E990AC55F108B50EDD423F8918A06" method="get">
<input type="hidden" name="noSearchFlag" value="true" id="noSearchFlag"/><input type="hidden" name="query" value="" id="query"/>    </form>
    <a id="advSearch" href="#" onclick="if(document.searchForm.query.value!='Search articles...')document.gasf.query.value=document.searchForm.query.value;document.gasf.submit();return false;">Advanced Search</a>
  </div>
  <!-- end : dashboard -->
  <!-- begin : navigation -->
  <ul id="nav">
    <li><a href="/home.action;jsessionid=734E990AC55F108B50EDD423F8918A06" tabindex="101">Home</a></li>
     <!-- This is a temporary action to link to th static toc page -->
    <li><a href="/static/browse.action;jsessionid=734E990AC55F108B50EDD423F8918A06" tabindex="102">Browse Articles</a>
        <ul>
          <li><a href="/article/browseIssue.action;jsessionid=734E990AC55F108B50EDD423F8918A06?field=issue">Current Issue</a></li> <!-- Assuming dynamic TOC is in place -->
          <li><a href="/article/browseVolume.action;jsessionid=734E990AC55F108B50EDD423F8918A06?field=volume">Journal Archive</a></li> 
          <li><a href="/article/browse.action;jsessionid=734E990AC55F108B50EDD423F8918A06?field=date">By Publication Date</a></li>
          <li><a href="/article/browse.action;jsessionid=734E990AC55F108B50EDD423F8918A06">By Subject</a></li>
          <li><a href="http://www.ploscollections.org/static/pcbiCollections.action">Collections</a></li>
        </ul>
    </li>
    <li><a href="/static/about.action;jsessionid=734E990AC55F108B50EDD423F8918A06" tabindex="103">About</a>
        <ul>
          <li><a href="/static/information.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Journal Information</a></li>
          <li><a href="/static/edboard.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Editorial Board</a></li>
          <li><a href="/static/eic.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Editors-in-Chief</a></li>
          <li><a href="/static/almInfo.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Article-Level Metrics</a></li>
          <li><a href="/static/license.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Open-Access License</a></li>
          <li><a href="/static/contact.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Contact Us</a></li>
        </ul>
      </li>
    <li><a href="/static/users.action;jsessionid=734E990AC55F108B50EDD423F8918A06" tabindex="104">For Readers</a>
        <ul>
          <li><a href="/static/commentGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Guidelines for Notes, Comments, and Corrections</a></li>
          <li><a href="/static/ratingGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Guidelines for Rating</a></li>
          <li><a href="/static/help.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Help Using This Site</a></li>
          <li><a href="/static/downloads.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Media Downloads</a></li>
          <li><a href="/static/sitemap.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Site Map</a></li>
        </ul>
      </li>
    <li><a href="/static/authors.action;jsessionid=734E990AC55F108B50EDD423F8918A06" tabindex="105">For Authors and Reviewers</a>
        <ul>
          <li><a href="/static/policies.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Editorial and Publishing Policies</a></li>
          <li><a href="/static/guidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Author Guidelines</a></li>
          <li><a href="/static/figureGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Figure and Table Guidelines</a></li>
          <li><a href="/static/checklist.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Submit Your Paper</a></li>
          <li><a href="/static/reviewerGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">Reviewer Guidelines</a></li>
	   <li><a href="http://www.plos.org/journals/index.php">Submit to Other PLOS Journals</a></li>
        </ul>
      </li>
      <li class="journalnav"><a href="http://www.plos.org" title="PLOS" tabindex="110" class="drop">PLOS.org</a>
        <ul>
          <li><a href="http://www.plos.org/oa/index.html" title="Open Access Statement">Open Access</a></li>
          <li><a href="http://www.plos.org/support/donate.php" title="Join PLOS: Show Your Support">Join PLOS</a></li>
          <li><a href="http://blogs.plos.org/" title="PLOS Blogs">PLOS Blogs</a></li>
	  <li><a href="http://www.zazzle.com/plos?rf=238434112415374154" title="PLOS Store">PLOS Store</a></li>
          <li><a href="http://currents.plos.org" title="PLOS Currents">PLOS Currents</a></li>
          <li><a href="http://www.plos.org/connect.html" title="PLOS.org | Stay Connected">Stay Connected</a></li>
        </ul>
      </li>
      <li class="journalnav"><a href="http://hubs.plos.org" tabindex="109">Hubs</a>
        <ul>
          <li><a href="http://hubs.plos.org/biodiversity" title="PLOS Hubs: Biodiversity">Biodiversity</a></li>
          <li><a href="http://clinicaltrials.ploshubs.org" title="PLOS Hub for Clinical Trials">Clinical Trials</a></li>
        </ul>
    </li>
      <li class="journalnav"><a href="http://www.plosjournals.org" tabindex="108">Journals</a>
        <ul>
          <li><a href="http://www.plosbiology.org/" title="PLOSBiology.org">PLOS Biology</a></li>
          <li><a href="http://www.plosmedicine.org/" title="PLOSMedicine.org">PLOS Medicine</a></li>
          <li><a href="http://www.ploscompbiol.org/" title="PLOSCompBiol.org">PLOS Computational Biology</a></li>
          <li><a href="http://www.plosgenetics.org/" title="PLOSGenetics.org">PLOS Genetics</a></li>
          <li><a href="http://www.plospathogens.org/" title="PLOSPathogens.org">PLOS Pathogens</a></li>
          <li><a href="http://www.plosone.org/" title="PLOSONE.org">PLOS ONE</a></li>
          <li><a href="http://www.plosntds.org/" title="PLOSNTDs.org">PLOS Neglected Tropical Diseases</a></li>
        </ul>
      </li>
    </ul>
  <!-- end : navigation -->
  </div>
  <!-- end : header --> 



<!-- begin : main content -->
<div id="content" class="article" style="visibility:visible;">

<!-- begin : right hand column -->

<div id="rhc" xpathLocation="noDialog">

  <div id="download" class="rhcBox_type1">
    <div class="wrap">
      <ul>
        <li class="download icon"><strong>Download:</strong>
          <a href="/article/fetchObjectAttachment.action;jsessionid=734E990AC55F108B50EDD423F8918A06?uri=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521&amp;representation=PDF" title="Download article PDF">PDF</a> |
          <a href="/article/citationList.action;jsessionid=734E990AC55F108B50EDD423F8918A06?articleURI=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521" title="Download citations">Citation</a> |
          <a href="/article/fetchObjectAttachment.action;jsessionid=734E990AC55F108B50EDD423F8918A06?uri=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521&amp;representation=XML" title="Download Article XML">XML</a>
        </li>
        <li class="print icon"><a href="#" onclick="window.print();return false;" title="Print Article"><strong>Print article</strong></a></li>
        <li class="reprint icon"><a href="https://www.odysseypress.com/onlinehost/reprint_order.php?type=A&page=0&journal=3&doi=10.1371/journal.pcbi.1002521&volume=&issue=&title=The Layer-Oriented Approach to Declarative Languages for Biological Modeling&author_name=Ivan%20Raikov%2C%20Erik%20De%20Schutter&start_page=1&end_page=21" title="Odyssey Press">EzReprint</a> New &amp; improved!</li>
      </ul>
    </div>
  </div>

  <div id="issues" class="rhcBox_type2">
    <p><strong>Published in the</strong>
    <a href="http://www.ploscompbiol.org/article/browseIssue.action?issue=info%3Adoi%2F10.1371%2Fissue.pcbi.v08.i05" title="Browse the Open-Access Issue">May 2012 Issue of <em>PLOS Computational Biology</em></a></p>
  </div>

  <div id="impact" class="rhcBox_type2">
    <h6>Metrics <a href="/static/help.action;jsessionid=734E990AC55F108B50EDD423F8918A06#articleMetrics" class="replaced" id="info" title="More information"><span>info</span></a></h6>

    <div class="wrap">
      <img id="rhcDataSpinner" src="/images/loading_small.gif" class="loading" />
      <div id="totalDataInRHC"></div>
      <div id="pubDateInRHC"></div>
      <div id="relatedCitesInRHC"></div>
    </div>

    <div class="more clearfix"><a href="/article/metrics/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" title="More information">More</a></div>
  </div>

  <div id="related" class="rhcBox_type2">
    <h6>Related Content</h6>
    <dl class="related">
      <dt>Related Articles on the Web</dt>
      <dd><a href="http://scholar.google.com/scholar?hl=en&lr=&q=related:http%3A%2F%2Fdx.plos.org%2F10.1371%2Fjournal.pcbi.1002521&btnG=Search">Google Scholar</a></dd>
      <dd id="pubMedRelatedLIInRHC" style="display:none;"><a id="pubMedRelatedURLInRHC">PubMed</a></dd>
    </dl>
    <div class="more clearfix"><a href="/article/related/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" title="More information">More</a></div>
  </div>

  <div id="share" class="rhcBox_type2">
    <h6>Share this Article <a href="/static/help.action;jsessionid=734E990AC55F108B50EDD423F8918A06#socialBookmarkLinks" class="replaced" id="info" title="More information"><span>info</span></a></h6>
    <ul>
      <li class="bookmarklets">

        <a href="http://www.reddit.com/submit?url=http://dx.plos.org/10.1371/journal.pcbi.1002521"
           target="_new"
           id="reddit">
          <img src="http://www.reddit.com/static/spreddit4.gif" alt="submit to reddit" border="0"/> </a>
        <g:plusone size="small" annotation="none" href=http://dx.plos.org/10.1371/journal.pcbi.1002521></g:plusone>
        <script type="text/javascript">
          (function () {
            var po = document.createElement('script');
            po.type = 'text/javascript';
            po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(po, s);
          })();
        </script>
        <a href="http://www.stumbleupon.com/submit?url=http://www.ploscompbiol.org/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521" target="_new"> <img border=0 src="http://cdn.stumble-upon.com/images/16x16_su_solid.gif" alt="StumbleUpon" title="Add to StumbleUpon"></a>
        <script>function fbs_click() {u='http://dx.plos.org/10.1371/journal.pcbi.1002521';t='The%20Layer-Oriented%20Approach%20to%20Declarative%20Languages%20for%20Biological%20Modeling';window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;}</script><a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fdx.plos.org%2F10.1371%2Fjournal.pcbi.1002521" onclick="return fbs_click()" target="_blank"><img src="http://static.ak.fbcdn.net/images/share/facebook_share_icon.gif" alt="Facebook" title="Add to Facebook" /></a>       <!-- for mor info, see http://www.facebook.com/share_partners.php -->
        <script type="text/javascript">
          function bookmark_in_connotea(u) {
            a=false; x=window; e=x.encodeURIComponent; d=document;
            w=open('http://www.connotea.org/addpopup?continue=confirm&uri='+e(u),
                'add', 'width=600, height=400, scrollbars, resizable');
            void(x.setTimeout('w.focus()',200));
          }
        </script>
        <a style='cursor: pointer;' onclick='javascript:bookmark_in_connotea("http://dx.plos.org/10.1371/journal.pcbi.1002521");'><img src='/images/icon_connotea_16x16.gif' alt="Connotea" title="Add to Connotea"/></a>
        <a href="http://www.citeulike.org/posturl?url=http%3A%2F%2Fdx.plos.org%2F10.1371%2Fjournal.pcbi.1002521&title=The%20Layer-Oriented%20Approach%20to%20Declarative%20Languages%20for%20Biological%20Modeling" target="_new"><img src='/images/icon_citeulike_16x16.gif' alt="CiteULike" title="Add to CiteULike" /></a>
        <a href="http://www.mendeley.com/import/?url=http%3A%2F%2Fdx.plos.org%2F10.1371%2Fjournal.pcbi.1002521" title="Add to Mendeley" target="_new"><img src="/images/icon_mendeley_16x16.gif" alt="Bibliography"></a>
        <script type="text/javascript">
          var twtTitle  = 'The Layer-Oriented Approach to Declarative Languages for Biological Modeling';
          var twtUrl    = 'http://dx.plos.org/10.1371/journal.pcbi.1002521';
          var twtTag    = '#PLOSCompBio:'
          var maxLength = 140 - (twtUrl.length + 1);
          if (twtTitle.length > maxLength) {
            twtTitle = twtTitle.substr(0, (maxLength - 17))+'...';  //truncates title to include space for twtTag and ellipsis
          }
          var twtLink = 'http://twitter.com/intent/tweet?text='+encodeURIComponent(twtTag + ' ' + twtTitle + ' ' + twtUrl);
          document.write('<a href="'+twtLink+'" target="_blank"><img src="/images/icon_twitter.gif" border="0" alt="Twitter icon" title="Tweet This!" /></a>');
        </script>

      </li>
      <li class="email icon"><a href="/article/emailArticle.action;jsessionid=734E990AC55F108B50EDD423F8918A06?articleURI=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521" title="Email this article">Email this article</a></li>
    </ul>
  </div>
  <div id="articleTwitterStream" style="display:none">
    <script src="http://widgets.twimg.com/j/2/widget.js"></script>
    <script>
      new TWTR.Widget({
        version: 2,
        type: 'search',
        search: encodeURIComponent('10.1371/journal.pcbi.1002521'),
        interval: 6000,
        title: '',
        subject: 'From Twitter',
        width: 300,
        height: 300,
        theme: {
          shell: {
            background: '#667893',
            color: '#ffffff'
          },
          tweets: {
            background: '#ffffff',
            color: '#444444',
            links: '#006699'
          }
        },
        features: {
          scrollbar: true,
          loop: false,
          live: true,
          hashtags: true,
          timestamp: true,
          avatars: true,
          toptweets: true,
          behavior: 'all'
        }
      }).render().start();
    </script>
  </div>
</div>
<!-- end : right hand column -->
<form name="articleInfo" id="articleInfo" method="" action="">
<input type="hidden" name="isAuthor" value="true" />
<input type="hidden" name="authorIdList" value="" />
<input type="hidden" name="userIdList" value="" />
<input type="hidden" name="otherIdList" value="" />
<input type="hidden" name="annotationId" value="" />
<input type="hidden" name="isResearchArticle" value="true" />
</form>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.XML" value="151952"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.PDF" value="943630"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g001.TIF" value="498062"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g001.PNG_I" value="41270"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g001.PNG_S" value="17845"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g001.PNG_M" value="115114"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g001.PNG_L" value="197639"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g002.TIF" value="531002"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g002.PNG_I" value="44606"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g002.PNG_S" value="17373"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g002.PNG_M" value="98294"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g002.PNG_L" value="194560"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g003.TIF" value="404106"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g003.PNG_I" value="48943"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g003.PNG_S" value="16190"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g003.PNG_M" value="140361"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g003.PNG_L" value="212289"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e001.TIF" value="7586"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e001.PNG" value="3922"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e002.TIF" value="1734"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e002.PNG" value="1031"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e003.TIF" value="6708"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e003.PNG" value="3451"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e004.TIF" value="10180"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e004.PNG" value="4773"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e005.TIF" value="1734"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e005.PNG" value="1031"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e006.TIF" value="1490"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e006.PNG" value="935"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g004.TIF" value="3284340"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g004.PNG_I" value="93113"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g004.PNG_S" value="19626"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g004.PNG_M" value="279847"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g004.PNG_L" value="2035468"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e007.TIF" value="558"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e007.PNG" value="495"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g005.TIF" value="1594208"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g005.PNG_I" value="41310"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g005.PNG_S" value="13379"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g005.PNG_M" value="125721"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g005.PNG_L" value="657029"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g006.TIF" value="1477736"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g006.PNG_I" value="43080"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g006.PNG_S" value="12951"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g006.PNG_M" value="130566"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g006.PNG_L" value="867344"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g007.TIF" value="337948"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g007.PNG_I" value="43347"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g007.PNG_S" value="18512"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g007.PNG_M" value="112863"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.g007.PNG_L" value="67438"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e008.TIF" value="1196"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e008.PNG" value="792"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e009.TIF" value="1924"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e009.PNG" value="1140"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e010.TIF" value="9052"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e010.PNG" value="4553"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e011.TIF" value="5646"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e011.PNG" value="2804"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e012.TIF" value="12652"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e012.PNG" value="5769"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e013.TIF" value="4750"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e013.PNG" value="2410"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e014.TIF" value="622"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e014.PNG" value="521"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e015.TIF" value="514"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e015.PNG" value="465"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e016.TIF" value="486"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e016.PNG" value="449"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e017.TIF" value="18072"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e017.PNG" value="8327"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e018.TIF" value="8468"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e018.PNG" value="4187"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e019.TIF" value="10454"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e019.PNG" value="4973"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e020.TIF" value="7706"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e020.PNG" value="3930"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e021.TIF" value="16712"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e021.PNG" value="7407"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e022.TIF" value="2086"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e022.PNG" value="1198"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e023.TIF" value="1198"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e023.PNG" value="795"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e024.TIF" value="3178"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e024.PNG" value="1703"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e025.TIF" value="2638"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e025.PNG" value="1548"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e026.TIF" value="4962"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e026.PNG" value="2600"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e027.TIF" value="5134"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e027.PNG" value="2684"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e028.TIF" value="6502"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e028.PNG" value="3350"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e029.TIF" value="1590"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e029.PNG" value="953"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e030.TIF" value="1068"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e030.PNG" value="715"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e031.TIF" value="1874"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e031.PNG" value="1077"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e032.TIF" value="3208"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e032.PNG" value="1809"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e033.TIF" value="1624"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e033.PNG" value="967"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e034.TIF" value="1202"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e034.PNG" value="766"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e035.TIF" value="1682"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e035.PNG" value="991"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e036.TIF" value="1518"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e036.PNG" value="913"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e037.TIF" value="1986"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e037.PNG" value="1158"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e038.TIF" value="1226"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e038.PNG" value="815"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e039.TIF" value="5456"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e039.PNG" value="2703"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e040.TIF" value="6538"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e040.PNG" value="3201"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e041.TIF" value="8140"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e041.PNG" value="3925"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e042.TIF" value="7306"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e042.PNG" value="3519"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e043.TIF" value="10958"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e043.PNG" value="5244"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e044.TIF" value="5212"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e044.PNG" value="2729"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e045.TIF" value="2934"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e045.PNG" value="1624"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e046.TIF" value="19268"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e046.PNG" value="8460"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e047.TIF" value="7930"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e047.PNG" value="3955"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e048.TIF" value="10354"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e048.PNG" value="4796"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e049.TIF" value="1004"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e049.PNG" value="713"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e050.TIF" value="19992"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e050.PNG" value="9466"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e051.TIF" value="12218"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e051.PNG" value="5840"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e052.TIF" value="11814"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e052.PNG" value="5581"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e053.TIF" value="1148"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e053.PNG" value="768"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e054.TIF" value="1226"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e054.PNG" value="815"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e055.TIF" value="1372"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e055.PNG" value="882"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e056.TIF" value="9088"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e056.PNG" value="4344"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e057.TIF" value="22438"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e057.PNG" value="10478"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e058.TIF" value="14700"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e058.PNG" value="6799"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e059.TIF" value="1130"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e059.PNG" value="754"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e060.TIF" value="1152"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e060.PNG" value="766"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e061.TIF" value="1562"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e061.PNG" value="965"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e062.TIF" value="1068"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e062.PNG" value="715"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e063.TIF" value="448"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e063.PNG" value="433"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e064.TIF" value="1290"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e064.PNG" value="838"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e065.TIF" value="590"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e065.PNG" value="514"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e066.TIF" value="2460"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e066.PNG" value="1419"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e067.TIF" value="30048"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e067.PNG" value="12778"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e068.TIF" value="32324"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e068.PNG" value="13609"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e069.TIF" value="5022"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e069.PNG" value="2558"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e070.TIF" value="2460"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e070.PNG" value="1419"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e071.TIF" value="1876"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e071.PNG" value="1115"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e072.TIF" value="542"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e072.PNG" value="484"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e073.TIF" value="542"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e073.PNG" value="484"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e074.TIF" value="2460"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e074.PNG" value="1419"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e075.TIF" value="982"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e075.PNG" value="679"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e076.TIF" value="1218"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e076.PNG" value="790"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e077.TIF" value="982"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e077.PNG" value="679"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e078.TIF" value="1218"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e078.PNG" value="790"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e079.TIF" value="1264"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e079.PNG" value="822"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e080.TIF" value="1904"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e080.PNG" value="1091"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e081.TIF" value="7650"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e081.PNG" value="3617"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e082.TIF" value="11518"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e082.PNG" value="5225"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e083.TIF" value="10572"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e083.PNG" value="5011"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e084.TIF" value="12362"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e084.PNG" value="5511"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e085.TIF" value="4860"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e085.PNG" value="2527"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e086.TIF" value="2478"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e086.PNG" value="1426"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e087.TIF" value="9276"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e087.PNG" value="4560"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e088.TIF" value="12078"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e088.PNG" value="5641"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e089.TIF" value="7320"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e089.PNG" value="3723"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e090.TIF" value="2460"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e090.PNG" value="1419"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e091.TIF" value="39912"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e091.PNG" value="16963"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e092.TIF" value="26536"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e092.PNG" value="11457"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e093.TIF" value="2446"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e093.PNG" value="1431"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e094.TIF" value="1514"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e094.PNG" value="934"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e095.TIF" value="446"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e095.PNG" value="435"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e096.TIF" value="552"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e096.PNG" value="484"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e097.TIF" value="988"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e097.PNG" value="706"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e098.TIF" value="10376"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e098.PNG" value="5018"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e099.TIF" value="13306"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e099.PNG" value="6445"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e100.TIF" value="10598"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e100.PNG" value="5084"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e101.TIF" value="11148"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e101.PNG" value="5298"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e102.TIF" value="15330"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e102.PNG" value="7356"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e103.TIF" value="1672"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e103.PNG" value="1000"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e104.TIF" value="1672"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e104.PNG" value="1006"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e105.TIF" value="26462"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e105.PNG" value="12151"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e106.TIF" value="854"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e106.PNG" value="632"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e107.TIF" value="15506"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e107.PNG" value="7534"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e108.TIF" value="13086"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e108.PNG" value="6184"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e109.TIF" value="14668"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e109.PNG" value="6902"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e110.TIF" value="12968"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e110.PNG" value="6043"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e111.TIF" value="20066"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e111.PNG" value="8744"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e112.TIF" value="31114"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e112.PNG" value="13301"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e113.TIF" value="716"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e113.PNG" value="498"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e114.TIF" value="642"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e114.PNG" value="526"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e115.TIF" value="1064"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e115.PNG" value="730"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e116.TIF" value="108520"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e116.PNG" value="52842"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e117.TIF" value="994"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e117.PNG" value="686"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e118.TIF" value="1490"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e118.PNG" value="935"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e119.TIF" value="1490"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e119.PNG" value="935"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e120.TIF" value="4590"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e120.PNG" value="2351"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e121.TIF" value="3256"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e121.PNG" value="1753"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e122.TIF" value="5362"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e122.PNG" value="2775"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e123.TIF" value="10208"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e123.PNG" value="4711"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e124.TIF" value="1426"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e124.PNG" value="898"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e125.TIF" value="12198"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e125.PNG" value="5617"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e126.TIF" value="19512"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e126.PNG" value="8808"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e127.TIF" value="10626"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e127.PNG" value="4909"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e128.TIF" value="12324"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e128.PNG" value="5715"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e129.TIF" value="10712"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e129.PNG" value="5035"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e130.TIF" value="8812"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e130.PNG" value="4052"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e131.TIF" value="158154"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e131.PNG" value="63532"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e132.TIF" value="48890"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e132.PNG" value="22119"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e133.TIF" value="3662"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e133.PNG" value="2009"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e134.TIF" value="3030"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e134.PNG" value="1701"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e135.TIF" value="3192"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e135.PNG" value="1790"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e136.TIF" value="4328"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e136.PNG" value="2290"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e137.TIF" value="4250"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e137.PNG" value="2298"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e138.TIF" value="12050"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e138.PNG" value="5821"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e139.TIF" value="25696"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e139.PNG" value="11298"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e140.TIF" value="24558"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e140.PNG" value="10837"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e141.TIF" value="1354"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.e141.PNG" value="878"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.s001.TIF" value="764530"/>
  <input type="hidden" class="assetSize" name="info:doi/10.1371/journal.pcbi.1002521.s002.PDF" value="120645"/>
<div id="articleContainer">

<span about="http://www.plos.org"  typeof="foaf:Organization" property="foaf:name" style="display:none; visibility:hidden;">PLOS</span>
<div id="researchArticle" class="content">
  <span rel="dc:publisher" href="http://www.plos.org"></span>
  <a id="top" name="top"></a>
<div id="contentHeader" xpathLocation="noSelect">
  <p>Open Access</p><p id="articleType">Research Article</p>
</div>

  <h1 xpathLocation="noSelect" property="dc:title" datatype="" rel="dc:type" href="http://purl.org/dc/dcmitype/Text">The Layer-Oriented Approach to Declarative Languages for Biological Modeling</h1>
  <div property="dc:description" datatype="" style="display:none; visibility:hidden;">Author SummaryThe pursuit for understanding of neural function by computational modeling has produced a variety of software tools, with each tool targeting specific audiences and often requiring input in its own distinct language. Consequently, comprehending and communicating neuroscience models is a difficult and time-consuming task. In this paper we suggest a new approach towards designing biological modeling languages, which we call the layer-oriented approach. The approach stems from the observation that diverse biological phenomena are described using a small set of mathematical formalisms (e.g. differential equations), which are structured according to some biological principles. Our proposal is illustrated by means of a computer language for describing computational models of ionic currents. The language consists of rules for expressing mathematical equations as well as rules to organize these equations according to the specific terminology used by neuroscientists. The layer-oriented approach offers two chief advantages. First, it allows the flexible use of mathematical equations to represent many different kinds of biological models. Second, it restricts the language within a framework of biological concepts so that existing modeling software can be reused. The goal of the layer-oriented approach is to help define appropriate notations for computational biology while enabling interoperability of software for biological modeling.</div>
  <span property="dc:date" content="2012-05-17" datatype="xsd:date" rel="dc:identifier" href="http://dx.doi.org/10.1371/journal.pcbi.1002521"></span>
  <span property="dc:subject" content="Computational Biology"></span>
  <span property="dc:subject" content="Computer Science"></span>
<form action="">
  <input type="hidden" name="journalDisplayName" id="journalDisplayName" value="PLOS Computational Biology" />
  <input type="hidden" name="crossRefPageURL" id="crossRefPageURL" value="/article/crossref/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" />
  <input type="hidden" name="twitterPageURL" id="twitterPageURL" value="/article/twitter/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" />
  <input type="hidden" name="metricsTabURL" id="metricsTabURL" value="/article/metrics/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" />
  <input type="hidden" name="doi" id="doi" value="info:doi/10.1371/journal.pcbi.1002521" />
  <input type="hidden" name="articleTitleUnformatted" id="articleTitleUnformatted" value="The%20Layer-Oriented%20Approach%20to%20Declarative%20Languages%20for%20Biological%20Modeling" />
  <input type="hidden" name="articlePubDate" id="articlePubDate" value="1337238000000" />
</form>
<div class="horizontalTabs" xpathLocation="noSelect">
  <ul id="tabsContainer">
        <li id="article" class="active"><a href="/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" class="tab" title="Article">Article</a></li>
        <li id="metrics"><a href="/article/metrics/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" class="tab" title="Metrics">Metrics</a></li>
        <li id="related"><a href="/article/related/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" class="tab" title="Related Content">Related Content</a></li>
        <li id="comments"><a href="/article/comments/info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521;jsessionid=734E990AC55F108B50EDD423F8918A06" class="tab" title="Comments">Comments: 0</a></li>
  </ul>
</div>
  <div id="articleMenuBox" xpathLocation="noSelect">
    <div id="articleMenu">
      <div class="wrap">
        <ul>
          <li class="annotation icon">To <strong>add a note</strong>, highlight some text. <a href="#" onclick="toggleAnnotation(this, 'public'); return false;" title="Click to turn notes on/off">Hide notes</a></li>
          <li class="discuss icon">
              <a href="/user/secure/secureRedirect.action?goTo=%2Farticle%2FfetchArticle.action%3FarticleURI%3Dinfo%253Adoi%252F10.1371%252Fjournal.pcbi.1002521">Make a general comment</a>
          </li>
        </ul>
        <div id="sectionNavTopBox" style="display:none;">
          <p><strong>Jump to</strong></p>
          <div id="sectionNavTop" class="tools"></div>
        </div>
      </div>
    </div>
      <div id="lightBox" xpathLocation="noDialog" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521')">
      </div>
  </div>




<p class="authors" xpathLocation="noSelect"><span rel="dc:creator"><span class="person" property="foaf:name" typeof="foaf:Person">Ivan Raikov</span></span><sup><a href="#aff1">1</a></sup><sup>,</sup><sup><a href="#aff2">2</a></sup><sup><a href="#cor1" class="fnoteref">*</a></sup>, <span rel="dc:creator"><span class="person" property="foaf:name" typeof="foaf:Person">Erik De Schutter</span></span><sup><a href="#aff1">1</a></sup><sup>,</sup><sup><a href="#aff2">2</a></sup></p><p class="affiliations" xpathLocation="noSelect"><a name="aff1" id="aff1"></a><strong>1</strong> Okinawa Institute of Science and Technology, Onna-son, Okinawa, Japan, <a name="aff2" id="aff2"></a><strong>2</strong> University of Antwerp, Antwerp, Belgium</p><div class="abstract" xpathLocation="/article[1]/front[1]/article-meta[1]/abstract[1]"><a id="abstract0" name="abstract0" toc="abstract0" title="Abstract"></a><h2 xpathLocation="noSelect">Abstract&nbsp;<a href="#top">Top</a></h2><p xpathLocation="/article[1]/front[1]/article-meta[1]/abstract[1]/p[1]">We present a new approach to modeling languages for computational biology, which we call the layer-oriented approach. The approach stems from the observation that many diverse biological phenomena are described using a small set of mathematical formalisms (e.g. differential equations), while at the same time different domains and subdomains of computational biology require that models are structured according to the accepted terminology and classification of that domain. Our approach uses distinct semantic layers to represent the domain-specific biological concepts and the underlying mathematical formalisms. Additional functionality can be transparently added to the language by adding more layers. This approach is specifically concerned with declarative languages, and throughout the paper we note some of the limitations inherent to declarative approaches. The layer-oriented approach is a way to specify explicitly how high-level biological modeling concepts are mapped to a computational representation, while abstracting away details of particular programming languages and simulation environments. To illustrate this process, we define an example language for describing models of ionic currents, and use a general mathematical notation for semantic transformations to show how to generate model simulation code for various simulation environments. We use the example language to describe a Purkinje neuron model and demonstrate how the layer-oriented approach can be used for solving several practical issues of computational neuroscience model development. We discuss the advantages and limitations of the approach in comparison with other modeling language efforts in the domain of computational biology and outline some principles for extensible, flexible modeling language design. We conclude by describing in detail the semantic transformations defined for our language.</p>
</div><div class="abstract" xpathLocation="/article[1]/front[1]/article-meta[1]/abstract[2]"><a id="abstract1" name="abstract1" toc="abstract1" title="Author Summary"></a>
<h2 xpathLocation="noSelect">Author Summary&nbsp;<a href="#top">Top</a></h2>
<p xpathLocation="/article[1]/front[1]/article-meta[1]/abstract[2]/p[1]">The pursuit for understanding of neural function by computational modeling has produced a variety of software tools, with each tool targeting specific audiences and often requiring input in its own distinct language. Consequently, comprehending and communicating neuroscience models is a difficult and time-consuming task. In this paper we suggest a new approach towards designing biological modeling languages, which we call the layer-oriented approach. The approach stems from the observation that diverse biological phenomena are described using a small set of mathematical formalisms (e.g. differential equations), which are structured according to some biological principles. Our proposal is illustrated by means of a computer language for describing computational models of ionic currents. The language consists of rules for expressing mathematical equations as well as rules to organize these equations according to the specific terminology used by neuroscientists. The layer-oriented approach offers two chief advantages. First, it allows the flexible use of mathematical equations to represent many different kinds of biological models. Second, it restricts the language within a framework of biological concepts so that existing modeling software can be reused. The goal of the layer-oriented approach is to help define appropriate notations for computational biology while enabling interoperability of software for biological modeling.</p>
</div>


<div class="articleinfo" xpathLocation="noSelect"><p><strong>Citation: </strong>Raikov I, De Schutter E (2012) The Layer-Oriented Approach to Declarative Languages for Biological Modeling. PLoS Comput Biol 8(5):
          e1002521.
            doi:10.1371/journal.pcbi.1002521</p><p><strong>Editor: </strong>Sean Hill, Ecole Polytechnique Fédérale de Lausanne, Switzerland</p><p></p><p><strong>Received:</strong> November 9, 2010; <strong>Accepted:</strong> March 31, 2012; <strong>Published:</strong> May 17, 2012</p><p><strong>Copyright:</strong> © 2012 Raikov, De Schutter. This is an open-access article distributed under the terms of the Creative Commons Attribution License, which permits unrestricted use, distribution, and reproduction in any medium, provided the original author and source are credited.</p><p><strong>Funding: </strong>This work was funded by the Okinawa Institute of Science and Technology and ‘Fonds voor Wetenschappelijk Onderzoek Vlaanderen’ grant FWO-G.0836.08. The funders had no role in study design, data collection and analysis, decision to publish, or preparation of the manuscript.</p><p><strong>Competing interests:</strong> The authors have declared that no competing interests exist.</p><p><a name="cor1"></a>* E-mail: <a href="mailto:raikov@oist.jp">raikov@oist.jp</a></p></div>





<div id="section1" xpathLocation="/article[1]/body[1]/sec[1]"><a id="s1" name="s1" toc="s1" title="Introduction"></a><h3 xpathLocation="noSelect">Introduction&nbsp;<a href="#top">Top</a></h3><p xpathLocation="/article[1]/body[1]/sec[1]/p[1]">Scientists who construct computational models of biological processes often find it necessary to use several different software tools in order to carry out various forms of data analysis and model simulation. However, each tool may employ its own model description format, consisting of diverse syntactic structures, and often can make implicit assumptions that are not reflected in the corresponding technical documentation <a href="#pcbi.1002521-Cannon1">[1]</a>, <a href="#pcbi.1002521-DeSchutter1">[2]</a>. As a result, constructing an exact implementation of a published model is a complex and time-consuming task.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[2]">As an example, in computational neuroscience, both the GENESIS <a href="#pcbi.1002521-Bower1">[3]</a> and NEURON <a href="#pcbi.1002521-Carnevale1">[4]</a> simulators provide a parameterized form of the Hodgkin-Huxley model <a href="#pcbi.1002521-Hodgkin1">[5]</a> as a basic object for model construction, but with some important differences between their description languages. The Hodgkin-Huxley object that exists in the Genesis language allows the rate equations to be specified in functional form and thus it can express not only the standard formulation of the model, but a whole family of conductance-based models of ionic currents. The NEURON HOC language also provides a Hodgkin-Huxley object, but its rate equations are fixed and it only allows different values for the parameters and initial states. NEURON includes a separate language, NMODL, which is intended for detailed descriptions of ionic current mechanisms that are distinct from the Hodgkin-Huxley equations. Hence, the two simulators have very different assumptions about what is meant by a “Hodgkin-Huxley model”.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[3]">In</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[4]">These efforts are now facing their own information exchange challenges <a href="#pcbi.1002521-Raikov1">[12]</a>. For instance, the Simulation Experiment Description Markup Language (SED-ML) <a href="#pcbi.1002521-Koehn1">[13]</a>, which is an emerging standard for encoding numerical simulation protocols on top of SBML and CellML, has faced problems such as different sets of mathematical expressions allowed in different modeling languages and representing a diverse range of simulation time courses in the simulator software <a href="#pcbi.1002521-Bergmann1">[14]</a>. Other limitations of existing markup languages for biological modeling are pointed out in Section <a href="#s3">Discussion</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[5]">These issues suggest that a more comprehensive approach may be necessary to build an interoperable ‘stack’ of extensible declarative languages for model description, simulation protocols, data analysis and so on.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[6]">The layer-oriented approach described in this paper is a methodology to specify the syntax and semantics of several interlinked declarative languages (or layers), each targeted at a particular problem domain, and formally describe how they relate to one another. We refer to syntax as the grammar according to which the sentences of a language are constructed; semantics is the system of rules that gives meaning to those sentences. The layers are not standalone languages, such as in the case of SED-ML, SBML and CellML, but share common properties in order to ensure their compatibility.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[7]">The work presented here was developed prior to the authors' involvement in the NineML effort, which is a model description language developed as part of the Large-Scale Network Modeling initiative of the International Neuroinformatics Coordinating Facility (<a href="http://www.incf.org/">http://www.incf.org/</a>) <a href="#pcbi.1002521-DeSchutter2">[15]</a>. The design of NineML is also divided in semantic layers, however its focus is on describing large-scale networks of integrate-and-fire neurons, and its design significantly diverges from the language presented here, which is oriented towards conductance-based models of ionic currents.</p>
<p xpathLocation="/article[1]/body[1]/sec[1]/p[8]">The rest of this paper is structured as follows. Section Results gives an informal introduction to an example language for describing ionic currents, presents a high-level overview of the layer-oriented design of the language and highlights several language features necessary to express a complex model of currents in the Purkinje neuron. Section <a href="#s3">Discussion</a> relates the layer-oriented approach to other model description language efforts and discusses its advantages and limitations. Section <a href="#s4">Methods</a> presents a detailed syntactic and semantic specification of all layers in the example language and includes a brief summary of pertinent computer science literature.</p>
</div>

<div id="section2" xpathLocation="/article[1]/body[1]/sec[2]"><a id="s2" name="s2" toc="s2" title="Results"></a><h3 xpathLocation="noSelect">Results&nbsp;<a href="#top">Top</a></h3><p xpathLocation="/article[1]/body[1]/sec[2]/p[1]">We propose the layer-oriented approach as a methodology to develop common semantics for declarative biological modeling languages and supporting software tools. The premise of the approach is that computational models of biology are not merely a flat collection of equations, but follow a hierarchical structure that reflects the organization of the actual biological object or process <a href="#pcbi.1002521-Gennari1">[16]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/p[2]">This work was initially motivated by our attempts to express models of Purkinje neuron currents in a declarative format and to solve the problem of automatically merging together ionic current mechanism descriptions in the NMODL language to reduce simulation run time (see Section Ionic current mechanism mapping problem in NEURON).</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/p[3]">Implementing the necessary model description concepts in an equation-based framework while preserving the neuroscience-specific model structure led us to adopt a general layer-oriented approach, where neuroscience-specific concepts are explicitly mapped onto structured equations. As a result, this approach accommodates a number of additional modeling concepts, supports multiple code generation targets and further offers several advantages:</p>


<ol class="order">

<li xpathLocation="/article[1]/body[1]/sec[2]/list[1]/list-item[1]">Semantic unambiguity: every element of a layer-oriented language has exactly one unique mathematical representation.</li>

<li xpathLocation="/article[1]/body[1]/sec[2]/list[1]/list-item[2]">Extensibility: new elements and corresponding semantics can be added to layer-oriented language in a consistent and unambiguous manner.</li>

<li xpathLocation="/article[1]/body[1]/sec[2]/list[1]/list-item[3]">Expressiveness: all possible relationships among the entities in a model of a biological system can be described.</li>

</ol><p xpathLocation="/article[1]/body[1]/sec[2]/p[4]">A key assumption of the layer-oriented approach is that the target domain of modeling is sufficiently well-defined so that its concepts can be encoded using the methodology we outline. Thus, the approach might not be necessarily suited for modeling techniques that rely on empirical algorithms, as opposed to a well-understood mathematical theory. This limitation and a possible methodology for community development of a layer-oriented language are discussed in Section When and how to use the layer-oriented approach.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/p[5]">Furthermore, we emphasize that our approach is concerned specifically with declarative languages. Variations of the layer-oriented approach based on algorithmic languages do exist in computational neuroscience. In Section Declarative and Algorithmic Languages we discuss this distinction and its implications. The introduction of Section <a href="#s4">Methods</a> relates our approach to computer science literature on domain-specific language design.</p>

<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/title[1]">The layer-oriented approach by example</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[1]">We first informally illustrate the layer-oriented approach with an example language for describing conductance-based ionic current models. Some technical details are omitted here, but complete formal grammar and semantic rules for the language are given in Section <a href="#s4">Methods</a>. In the following sections we show how to use this language to describe a complex model of ionic currents in the Purkinje neuron.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[2]">The example language provides convenient idioms for common neuroscience modeling concepts. The layer-oriented approach ensures that each language idiom has a consistent mathematical representation that can be understood by each simulation or analysis software we desire to use. Furthermore, we will be able to extend the language by defining new concepts in terms of differential equations and other mathematical abstractions.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[3]">We begin with a representation of a Hodgkin-Huxley-style model, which implicitly relies on several physiological modeling concepts such as Ohmic currents and gating variables.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[4]">For the reader interested in technical details, the syntax presented below uses SXML, an alternative XML Infoset implementation based on Lisp s-expressions <a href="#pcbi.1002521-Kiselyov1">[17]</a>. This syntax has an exact equivalent in conventional XML, but the use of s-expressions eliminates the necessity of closing tags and considerably reduces syntactic clutter.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[5]">
          <span class="monospace">(Membrane-potential</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[6]"> <span class="monospace">(Membrane-capacitance 1.0 uF/cm*cm)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[7]"> <span class="monospace">(Ohmic-current Na (E = 115 mV) (g_max = 120 mS/cm*cm)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[8]">  <span class="monospace">(gating m (power 3)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[9]">   <span class="monospace">(forward-rate (2.5 - 0.1*V)/((exp (2.5 - 0.1*V)) - 1))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[10]">   <span class="monospace">(reverse-rate (0.125 * exp(-V/80))))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[11]">  <span class="monospace">(gating h (power 1)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[12]">   <span class="monospace">(forward-rate …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[13]">   <span class="monospace">(reverse-rate …))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[14]">
          <span class="monospace">) ;; end of Ohmic-current Na</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[15]">
          <span class="monospace">(Ohmic-current K (E = …) (g_max = …)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[16]">  <span class="monospace">(gating n (power 4)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[17]">   <span class="monospace">(forward-rate …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[18]">   <span class="monospace">(reverse-rate …))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[19]">
          <span class="monospace">) ;; end of Ohmic-current K</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[20]"> <span class="monospace">(Ohmic-current Leak …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[21]">
          <span class="monospace">) ;; end of Membrane-potential</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[22]">Although the sentences above are a fairly idiomatic representation of the Hodgkin-Huxley model, we must ensure that the underlying mathematics are consistently represented when this model is loaded in different software environments.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[23]">To meet this requirement we need a language mechanism to automatically transform the above model code into the corresponding equations:</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[24]">
          <span class="monospace">Capacitance = 1.0 uF/cm*cm</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[25]">
          <span class="monospace">g_Na = g_max_Na * m_Na * m_Na * m_Na * h_Na</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[26]">
          <span class="monospace">I_Na = g_NA * (V - E_Na)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[27]">
          <span class="monospace">dm_Na/dt = alpha_m_Na(V) * (1 - m_Na) - beta_m_Na * m_Na</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[28]">
          <span class="monospace">alpha_m (V) = (2.5 - 0.1*V)/((exp (2.5 - 0.1*V)) - 1)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[29]">
          <span class="monospace">…</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[30]">
          <span class="monospace">V = - (I_Na+I_K+…)/Capacitance</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[31]"><a href="#pcbi-1002521-g001">Figure 1</a> is a conceptual overview of the steps performed by such a transformation mechanism in order to construct ionic current and membrane potential equations. In step A.1 the gating variable declarations are used to construct the gating dynamics equation, and in step A.2 the maximal conductance and reversal potential declarations are combined together to form the complete ionic current equation. In step B.1 all Ohmic current declarations are assembled together and used to construct the membrane potential equation in step B.2.</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[1]"><a name="pcbi-1002521-g001" id="pcbi-1002521-g001" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g001" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g001');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g001');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g001&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[1]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g001" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g001');"><span>Figure 1. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[1]/caption[1]/title[1]">Conceptual overview of the transformation steps involved in generating a membrane potential equation from a collection of Ohmic current definitions.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[1]/caption[1]/p[1]">Step A.1 obtains the constituent parts of the gating component and constructs the gating dynamics equations. Step A.2 constructs the ionic current equation using the gating variables, maximal conductance and reversal potential declarations. Step B.1 assembles together all Ohmic current declarations and Step B.2 is constructing the membrane potential equation.</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g001</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g001/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g001/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g001.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g001/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g001.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[32]">This kind of transformation mechanism is key to ensuring consistency of the mathematical representations of our model. Furthermore, extending the set of available model description concepts then becomes a matter of defining appropriate transformation rules. For example, to accommodate Goldman-Hodgkin-Katz (GHK) currents we use the transformation rules illustrated in <a href="#pcbi-1002521-g002">Figure 2</a>. This example already demonstrates the extensibility of the layer-oriented approach. <a href="#pcbi-1002521-g002">Figure 2</a> clearly shows that incorporating this important feature requires only minimal extensions to the structures presented in <a href="#pcbi-1002521-g001">Figure 1</a>. Note that the gating mechanisms are identical for <a href="#pcbi-1002521-g001">Figures 1A</a> and <a href="#pcbi-1002521-g002">2A</a> and that <a href="#pcbi-1002521-g002">Figure 2B</a> just adds GHK currents at the appropriate structure without disturbing the overall model structure.Analogously with the Ohmic current transformation, step A.1 constructs the gating dynamics and step A.2 constructs the GHK current equation.</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[2]"><a name="pcbi-1002521-g002" id="pcbi-1002521-g002" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g002" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g002');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g002');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g002&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[2]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g002" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g002');"><span>Figure 2. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[2]/caption[1]/title[1]">Conceptual overview of the transformation steps involved in generating a membrane potential equation from a collection of Ohmic and GHK current definitions.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/fig[2]/caption[1]/p[1]">Step A.1 constructs the gating dynamics equations and extracting the maximal permeability and concentration definition. Step A.2 constructs the ionic current equation using the gating values, the maximal permeability and the GHK equation, which depends on the definitions of concentration. Step B.1 assembles together all Ohmic and GHK current declarations and Step B.2 constructs the membrane potential equation.</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g002</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g002/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g002/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g002.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g002/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g002.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[1]/p[33]">Thus, the layer-oriented approach is primarily concerned with definitions of biological modeling concepts and their equivalent equational form. The transformation from one to the other is explained in detail in the following sections.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/title[1]">Concepts of the layer-oriented approach</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/p[1]">The layer-oriented approach is a structured methodology to define notations for declarative computational models. It involves:</p>


<ul>

<li xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/list[1]/list-item[1]"><em>language layers</em>, which are collections of grammatical rules that correspond to concepts from a particular domain, such as computational neuroscience or differential calculus;</li>

<li xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/list[1]/list-item[2]"><em>semantic transformation functions</em>, which assign semantics to the layers, in the form of rules that specify how concepts from one layer can be represented by a combination of concepts in another layer.</li>

</ul><p xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/p[2]">The question of which biological modeling and mathematical concepts are chosen and grouped in layers is one that must be properly answered by the scientific community. The layer-oriented approach provides the technical means to formalize the relationships between the domains of biological modeling and mathematical concepts. The process of formalizing these relationships is a way to identify and eliminate potential flaws in the language and to communicate the language semantics in a concise manner. More on this topic can be found in Section When and how to use the layer-oriented approach.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/p[3]">As a concrete example, <a href="#pcbi-1002521-g003">Figure 3</a> illustrates the structure and the relationships of several language layers that together can describe the structure of computational neuroscience models of ionic currents as well as voltage clamp protocols, explained below.</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/fig[1]"><a name="pcbi-1002521-g003" id="pcbi-1002521-g003" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g003" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g003');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g003');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g003&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/fig[1]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g003" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g003');"><span>Figure 3. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/fig[1]/caption[1]/title[1]">Conceptual layers of modeling and their relationships.</span></strong></p><span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g003</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g003/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g003/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g003.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g003/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g003.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/p[4]">The ionic current layer consists of elements that correspond to neuroscience modeling concepts, such as channel gates and ionic conductances. The mathematical layer consists of elements that correspond to general mathematical concepts, such as rate equations and functions.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[2]/p[5]"><a href="#pcbi-1002521-g003">Figure 3</a> is not meant to be an exhaustive representation of the biological modeling ‘universe’. It can be easily conceived that e.g. adding stochastic differential equations to the mathematical layer will allow a range of stochastic models to be included in the higher layers. The point is that the layer-oriented approach enables such additions to be explicitly and clearly specified while preserving full compatibility with existing definitions, as illustrated with the GHK example in <a href="#pcbi-1002521-g002">Figure 2</a>.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/title[1]">A metalanguage for describing layers and transformations between them</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[1]">In our approach, a semantic transformation function is a collection of rules that specify how concepts from one layer are represented as a combination of concepts from another. An important practical aim is to represent the layers and the transformations between them by means of a mathematical notation that does not have the clutter of programming details inherent to a concrete implementation yet can be easily expressed in any reasonable programming language.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[2]">Thus, the semantic transformation functions in this paper are written in a metalanguage that contains the essence of some typical patterns of programming languages. With this approach, the semantics of layer-oriented language can be described independently of the implementation language by a sequence of various layer transformation functions, e.g.:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e001&amp;representation=PNG"></span><br>The sequence of transformation functions comprising <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e002&amp;representation=PNG"></span> describes a set of common operations necessary to express a model of ionic currents as an environment of equations conforming to the syntax of the equation-oriented mathematical layer (detailed definitions are given in Section <a href="#s4">Methods</a>).</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[3]">The specification of a layer-oriented language then takes the form of semantic transformation functions for all layers, which can be straightforwardly mapped to an implementation. We note here that the metalanguage is not concerned with issues such as error handling for invalid input as these are details unique to each implementation.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[4]">A further practical benefit of this manner of specification is that semantic transformation functions provide a convenient blueprint for code generation, or the process of transforming computational biology models to computer-executable form <a href="#pcbi.1002521-Goodman1">[18]</a>, in this specific instance generation of Matlab or NMODL language. The two sequences of transformation functions below describe code generation for two very different software platforms (Matlab and the NEURON simulator) using largely identical sequences of steps (details are given in Section <a href="#s4">Methods</a>).<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e003&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e004&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[5]">From a practical standpoint, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e005&amp;representation=PNG"></span> and its constituent parts need only be implemented once and reside in a standard software library, which can then be shared between multiple simulators and other software that aims to read this particular model description language. Additional information for code generation, such as provided by <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e006&amp;representation=PNG"></span> (needed for NEURON) can also be specified with semantic transformation functions and implemented either as part of the standard library or for specific platforms.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[3]/p[6]">The transformations specific to neuroscience modeling software are briefly described in the following sections. All transformation functions mentioned in this section are defined in Section <a href="#s4">Methods</a></p>


<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/title[1]">Components and structured layer-based models of ionic currents</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[1]">Our model examples thus far have included the use of two layers, one for ionic current descriptions and one for equations and functions. The equation layer omitted any of the structure associated with biological interpretation of the equations, such as the gating elements. But the language must have the capability not merely to represent a set of equations, but to group related definitions and equations across layers.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[2]">We therefore introduce the notion of model components, which encapsulate related equations and functions that are part of a model. They are generic entities that are not concerned with how these equations are grouped together and permit arbitrary nesting of sub-components. We further characterize a component by its type and output quantities.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[3]">From the point of view of biological modeling, only particular combinations of nesting are valid. Wimalaratne et al. observed that allowing arbitrary structuring of hierarchical biological models leads to difficulties in model exchange, and therefore we need to define rules that require models of ionic currents to be structured according to the accepted principles of computational biology <a href="#pcbi.1002521-Wimalaratne1">[19]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[4]">The syntax and semantics of the component layer and structuring rules are given in Section <a href="#s4">Methods</a>. These rules stipulate that the following structure must be followed:</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[5]">
          <span class="monospace">(Membrane-potential Modelname</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[6]"> <span class="monospace">(Membrane-capacitance (out C)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[7]">  <span class="monospace">… definition of capacitance …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[8]"> <span class="monospace">(Ohmic-current (name ion)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[9]">  <span class="monospace">(gating (out m)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[10]">   <span class="monospace">… equations for channel gate dynamics …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[11]">  <span class="monospace">(pore (out gbar)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[12]">   <span class="monospace">… equations and parameters of maximal conductance …)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[13]">  <span class="monospace">(permeating-ion (name ion) (out e)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[14]">   <span class="monospace">… definition of reversal potential …)))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[15]">Compared with the previous example, the model structure above explicitly labels the sub-components of the ohmic current component (gating, pore and permeating-ion). While slightly more verbose, this notation allows easier formulation of transformation rules, as we explain in Section <a href="#s4">Methods</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[4]/p[16]">These are not intended to be authoritative rules, but an illustration of the capabilities of the layer-oriented approach. A different set of rules can be easily formulated and formalized as determined by discourse in the scientific community. Further details can be found in Section <a href="#s3">Discussion</a> and Section <a href="#s4">Methods</a>.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/title[1]">The Khaliq-Raman model of the cerebellar Purkinje neuron</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/p[1]">We have used the prototype language to implement a previously published model of the Purkinje neuron. The component abstraction gives us the ability to construct models as aggregations of components containing definitions of ionic gates, conductances and so on. <a href="#pcbi-1002521-g004">Figure 4</a> illustrates the component structure of our description of the Khaliq-Raman model of cerebellar Purkinje neurons (ModelDB accession number 48332) <a href="#pcbi.1002521-Khaliq1">[20]</a>. The complete prototype listing is given in Supporting <a href="#pcbi.1002521.s002">Text S1</a>.</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/fig[1]"><a name="pcbi-1002521-g004" id="pcbi-1002521-g004" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g004" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g004');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g004');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g004&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/fig[1]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g004" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g004');"><span>Figure 4. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/fig[1]/caption[1]/title[1]">Components of a layer-oriented implementation of the Khaliq-Raman model of the Purkinje neuron.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/fig[1]/caption[1]/p[1]">The model representation in the ionic current layer consists of a set of components that refer to the various biological concepts in the model — membrane capacitance, calcium concentration dynamics and the ionic currents comprising this model. Each component contains mathematical definitions pertaining to those biological concepts.</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g004</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g004/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g004/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g004.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g004/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g004.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/p[2]">Our layer-oriented description of this model consists of the Ohmic and GHK current components already mentioned as well as a calcium concentration dynamics components that will be explained in the following subsections.</p>
<h5 xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[1]/title[1]">Parametric gating dynamics.</h5><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[1]/p[1]">The declarations contained in the <span class="monospace">Ohmic-current</span> component shown in <a href="#pcbi-1002521-g004">Figure 4</a> define four relations that represent activation and inactivation rates and whose expression bodies are omitted from the figure for brevity. The construct <span class="monospace">HH-gating-dynamics</span> is a template which is expanded into equations for the two state variables <span class="monospace">m</span> and <span class="monospace">h</span> using the given rate function expressions.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[1]/p[2]">Templates are special case of components where the contained equations are required to have certain names. A regular component can contain equations and functions with arbitrary names, but the <span class="monospace">HH-gating-dynamics</span> template must contain equations that are exactly called <span class="monospace">m_inf, tau_m,</span> etc. In all other aspects, templates are treated in the same manner as the other types of components.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[1]/p[3]">The transformation function for <span class="monospace">HH-gating-dynamics</span> is given in Section <a href="#s4">Methods</a>.</p>

<h5 xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[2]/title[1]">Resurgent sodium current.</h5><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[2]/p[1]">Although the definitions shown above refer to standard Hodgkin-Huxley-type models, arbitrary reaction rules to represent gate dynamics can be included in the model as long as the correct component interface is used. Moreover, models of additional biophysical processes can be seamlessly incorporated in the functions that compute the channel opening and closing rates.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[2]/p[2]">The resurgent sodium current in the Khaliq-Raman model uses a 13-state kinetic scheme and therefore we must use the <span class="monospace">Reaction</span> type of equation, rather than the <span class="monospace">HH-gating-dynamics</span> template. The transformation procedures for the lower-level layers already handle kinetic schemes, as shown in Section <a href="#s4">Methods</a> and therefore we can represent this type of current without further extensions to the language. A fragment of the resurgent sodium kinetic scheme is shown in the <span class="monospace">Narsg</span> component box in <a href="#pcbi-1002521-g004">Figure 4</a>.</p>

<h5 xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/title[1]">P-type calcium current.</h5><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[1]">The Khaliq-Raman model uses the standard Ohmic equation to describe most of its currents and the Goldman-Hodgkin-Katz (GHK) constant field equation <a href="#pcbi.1002521-Clay1">[21]</a> to describe its P-type calcium current. As illustrated in the introductory example, this has necessitated the addition of a GHK current transformation function and extending the membrane potential transformation function with an additional clause, following the GHK formulation <a href="#pcbi.1002521-DeSchutter3">[22]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[2]">The definition of the GHK current transformation function is given in Section <a href="#s4">Methods</a>. It still refers to probability that channel gates are open, however the current equation now refers to a permeability quantity <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e007&amp;representation=PNG"></span> and no longer includes reversal potential. We have extended the set of component types with the type permeability and use it to encapsulate equations that compute current rather than conductance.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[3]">The CaP current can then be formulated by means of the permeability component, as shown in the the <span class="monospace">CaP</span> component box in <a href="#pcbi-1002521-g004">Figure 4</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[4]">In the code shown in the figure, the external calcium concentration is a constant but the internal concentration is given by variable cai, which does not appear to be defined in the component. As we will see in the next section, the internal concentration dynamics are defined in a separate component, which is not visible in the component defining the CaP current. In the present paper, we address this issue by a global declaration that specifies that the global identifier cai is related to the definitions in the calcium concentration component so that it is visible to declarations from other components:</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[5]">
            <span class="monospace">input (cai from decaying-pool ca)</span>
          </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[3]/p[6]">The above declaration specifies that the value <span class="monospace">cai</span> must come from a component named <span class="monospace">ca</span> of type <span class="monospace">decaying-pool</span>. An example of such a component comes next.</p>

<h5 xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[4]/title[1]">Calcium concentration dynamics.</h5><p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[4]/p[1]">Our description of the Khaliq-Raman model includes the component type <span class="monospace">decaying-pool</span>, which is used to encapsulate the calcium concentration dynamics of the model. The representation of this component is the calcium decay equation due to Traub <a href="#pcbi.1002521-Traub1">[23]</a>, shown in <a href="#pcbi-1002521-g004">Figure 4</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[5]/sec[4]/p[2]">The <span class="monospace">cac</span> variable is exported from this component and, because of the input declaration in the previous section the semantic transformations described in Section <a href="#s4">Methods</a> assign the value <span class="monospace">cac</span> to the global <span class="monospace">cai</span>.</p>



<h4 xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/title[1]">Simulation experiments</h4>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[1]">The layer-oriented approach can be easily applied to describing simulation experiments. The simulation results in <a href="#pcbi-1002521-g005">Figures 5</a> and <a href="#pcbi-1002521-g006">6</a> were produced from the same model description with code generated by our prototype implementation of a translator for layer-oriented neuroscience models, as applied to the Khaliq-Raman model. The simulation software used was NEURON 7.1 and GNU Octave 3.2, in both cases running under Debian Linux 5.0 on a Dell Precision T5400 workstation. The code generation algorithm is based on the transformation rules defined in Section <a href="#s4">Methods</a>. Additional simulation results addressing runtime efficiency in the NEURON simulation environment are described in Section Ionic current mechanism mapping problem in NEURON and presented in Supporting <a href="#pcbi.1002521.s001">Figure S1</a>.</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[1]"><a name="pcbi-1002521-g005" id="pcbi-1002521-g005" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g005" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g005');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g005');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g005&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[1]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g005" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g005');"><span>Figure 5. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[1]/caption[1]/title[1]">Comparison between simulation runs of the Khaliq-Raman model under different computing environments.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[1]/caption[1]/p[1]">NEURON is a software for simulations of neurons and networks of neurons. GNU Octave is an open-source equivalent to Matlab. The NEURON simulation was conducted with NEURON 7.1 using the cvode method, and the GNU Octave simulation was conducted with Octave 3.2 using the RADAU solver from the OdePkg toolbox version 0.6.10. In both cases, the software was run under Debian Linux 5.0 on a Dell Precision T5400 computer (CPU Intel Xeon E5430 2.66 GHz). The difference in how the respective simulation platforms compute the initial values for the resurgent sodium current causes the initial discrepancy between the two simulation runs.</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g005</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g005/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g005/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g005.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g005/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g005.TIF"></span> TIFF)
                  </a></li></ul></div></div><div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[2]"><a name="pcbi-1002521-g006" id="pcbi-1002521-g006" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g006" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g006');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g006');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g006&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[2]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g006" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g006');"><span>Figure 6. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[2]/caption[1]/title[1]">Comparison between voltage clamp simulation of the Khaliq-Raman model under different computing environments.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/fig[2]/caption[1]/p[1]">The NEURON simulation was conducted with NEURON 7.1 using the cvode method, and the GNU Octave simulation was conducted with Octave 3.2 using the RADAU solver from the OdePkg toolbox version 0.6.10. In both cases, the software was run under Debian Linux 5.0 on a Dell Precision T5400 computer (CPU Intel Xeon E5430 2.66 GHz).</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g006</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g006/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g006/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g006.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g006/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g006.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[2]">The transformation functions for simulation experiments are given in Section <a href="#s4">Methods</a>. We define two new types of components, <span class="monospace">simulation</span> and <span class="monospace">voltage-clamp</span>, and use them to specify simulation and voltage clamp parameters for the different currents of the model, e.g.:</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[3]">
          <span class="monospace">(simulation (out duration stepsize)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[4]"> <span class="monospace">(const duration = 2000)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[5]"> <span class="monospace">(const stepsize = 1e-4)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[6]">
          <span class="monospace">)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[7]">
          <span class="monospace">(voltage-clamp (name CaBK)</span>
        </p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[8]"> <span class="monospace">(out hold base stepsize nsteps holding-duration base-duration)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[9]"> <span class="monospace">(const hold = −90)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[10]"> <span class="monospace">(const base = −40)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[11]"> <span class="monospace">(const stepsize = 10)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[12]"> <span class="monospace">(const nsteps = 5)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[13]"> <span class="monospace">(const holding-duration = 5)</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[14]"> <span class="monospace">(const base-duration = 20))</span></p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/p[15]">The semantics associated with each component of type <span class="monospace">voltage-clamp</span> require that there must be a corresponding ionic current component of the same name. This then allows the generation of voltage clamp scripts that are consistent with the currents of the model.</p>
<h5 xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/title[1]">Ionic current mechanism mapping problem in NEURON.</h5><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[1]">To aid the construction of models and simulations the NEURON simulation environment provides a number of predefined constructs that correspond to familiar neuroscience idioms. User-defined mechanisms, such as voltage- and ligand-gated ion channels, diffusion, buffering, etc., can be added to the default set of mechanisms by writing model descriptions in NMODL, an equation-oriented declarative language.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[2]">These mechanisms are often structured such that there is a one-to-one mapping between NMODL files (.mod extension) and ionic current mechanism descriptions (7 A).</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[3]">However, it is frequently advantageous to combine the descriptions of several mechanisms in the same NMODL file so that their equations can be solved together, in order to improve the numerical efficiency of the simulation. Unfortunately, the standard NEURON software does not provide means to merge mechanism descriptions automatically and users are forced to maintain large NMODL files that are difficult to read and understand. Ideally, the modeling language must permit an easy-to-read model description that can be automatically transformed into efficient code (<a href="#pcbi-1002521-g007">Figure 7 B</a>).</p>
<div class="figure" xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/fig[1]"><a name="pcbi-1002521-g007" id="pcbi-1002521-g007" title="Click for larger image " href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g007" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g007');"><div class="expand-link" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g007');"></div><img xpathLocation="noSelect" border="1" src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.g007&amp;representation=PNG_I" align="left" alt="thumbnail" class="thumbnail"></a><p><strong xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/fig[1]/label[1]"><a xpathLocation="noSelect" href="/article/info:doi/10.1371/journal.pcbi.1002521?imageURI=info:doi/10.1371/journal.pcbi.1002521.g007" onclick="return ambra.lightBox.show('info:doi/10.1371/journal.pcbi.1002521', 'info:doi/10.1371/journal.pcbi.1002521.g007');"><span>Figure 7. </span></a> <span xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/fig[1]/caption[1]/title[1]">Ion channel mechanism mapping problem in NEURON.</span></strong></p><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/fig[1]/caption[1]/p[1]">A) standard approach; B) merging of several ion channel mechanisms in order to improve efficiency. Our layer-oriented code generation tool generates the .mod files, the .c files are generated by NEURON.</p>
<span xpathLocation="noSelect">doi:10.1371/journal.pcbi.1002521.g007</span><div class="clearer"></div><div class="figure-inline-download"><ul><li><strong>Download: </strong><a href="/article/info:doi/10.1371/journal.pcbi.1002521.g007/powerpoint">PowerPoint slide</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g007/largerimage">
                    larger image (<span id="info:doi/10.1371/journal.pcbi.1002521.g007.PNG_L"></span> PNG)</a> |
                  <a href="/article/info:doi/10.1371/journal.pcbi.1002521.g007/originalimage">
                    original image (<span id="info:doi/10.1371/journal.pcbi.1002521.g007.TIF"></span> TIFF)
                  </a></li></ul></div></div><p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[4]">The difficulty in combining the ionic current equations together comes from the fact that the same variable names may be used for equations that belong to different types of ionic currents. This is not a problem as long as these equations reside in separate NMODL files, however merging them together presents the risk of collisions between common variable names (e.g. <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e008&amp;representation=PNG"></span>) and therefore the users must resort to a very careful (and possibly verbose) coding style to ensure unique naming.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[5]">This issue is naturally solved by the modularity and semantic unambiguity of our approach because the equations for each ionic current reside in separate components and a renaming step in the transformation function ensures that each variable has a unique name that is prefixed by the name of the component (specified in detail in Section <a href="#s4">Methods</a>). Furthermore, each ionic-current component contains information identifying the ionic species, which is used to combine the current equations for all channels of a given ionic species.</p>
<p xpathLocation="/article[1]/body[1]/sec[2]/sec[6]/sec[1]/p[6]">As a result, the NMODL code generator implemented in our prototype software allows a very systematic methodology for exploration of NEURON's performance. We have conducted a number of performance benchmarks with the Khaliq-Raman model, as detailed in Supporting <a href="#pcbi.1002521.s001">Figure S1</a>. The average simulation time using merged mechanism descriptions was reduced by 18.5% when using NEURON's variable time step solver and by 22.3% when using NEURON's fixed time step solver.</p>


</div>

<div id="section3" xpathLocation="/article[1]/body[1]/sec[3]"><a id="s3" name="s3" toc="s3" title="Discussion"></a><h3 xpathLocation="noSelect">Discussion&nbsp;<a href="#top">Top</a></h3><p xpathLocation="/article[1]/body[1]/sec[3]/p[1]">The shortcomings of existing standardization efforts suggest that future work should address the formal specification of mathematical concepts and the mapping of high-level modeling concepts to computational representation. This will make it possible to uniformly describe, share and use a new modeling technique within the same language. In particular, we believe that the layer-oriented approach has the following advantages over the existing approaches.</p>

<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[1]/title[1]">Semantic unambiguity</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[1]/p[1]">The different domains and subdomains of computational biology each require that models are structured according to the accepted terminology and classification of that domain. Therefore, successful development of future biological modeling languages will depend on appropriately formalised representation of domain knowledge. One common approach to developing such formalizations are the multiple ontological efforts to represent various biological entities for multiple levels of granularity <a href="#pcbi.1002521-Burgun1">[24]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[1]/p[2]">Our layer-oriented approach complements ontologies with the systematic development of domain-specific language rules so that the conventions and categories of the domain are distinctly and clearly represented to the user, while generality is preserved by the underlying layers that provide access to general mathematical and algorithmic concepts.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/title[1]">Extensibility</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/p[1]">By ‘extensibility’ we mean functionality to describe new modeling techniques in addition to those provided by standard model databases.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/p[2]">For example, suppose that a scientist wishes to use conditional expressions in the mathematical layer of a layer-based language, which is necessary for e.g. threshold detection in the integrate-and-fire formalism <a href="#pcbi.1002521-Brunel1">[25]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/p[3]">In such a case, the mathematical layer can be extended with conditional primitives to express transitions between dynamical systems and the neuroscience modeling layer can be extended with a regime concept, which encapsulates the subthreshold equations and specifies the firing condition and reset equation. The mapping between the high-level regime concept and the condition primitives can be defined by a semantic transformation function.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/p[4]">As another example, suppose that a scientist wishes to integrate morphological descriptions in a layer-based language. While the examples in this paper do not address geometric descriptions and partial differential equations the same transformation approaches can be applied to define complex surfaces and dynamics based on core abstractions for spatial PDEs.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[2]/p[5]">Once the precise hierarchy of concepts and mathematical mechanisms are defined by the community, a layer-oriented language can allow scientists using the language to formally describe new approaches and make them shareable without having to alter the core language specification, as must be done for NeuroML.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[3]/title[1]">Expressiveness</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[3]/p[1]">As already observed by Wimalaratne, et al., explicitly defined hierarchical structuring rules are a necessity for many kinds of biological modeling. As we discuss in Section Existing biological modeling languages, some of the key evolutionary improvements in existing and emerging modeling languages are related to modularity, hierarchical structuring and expressing relationships between different components of a biological model. These properties are well-addressed in our approach by means of compositionality.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[3]/p[2]">We refer as compositionality to the ability to compose a model from pre-existing parts. For example, given a set of standard ion channel objects from a model library and a set of parameters provided by the user, the equations for the model could be automatically constructed depending on the chosen channel objects.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[3]/p[3]">A sophisticated component model is required to support descriptions such as a dendritic maximal conductance that is dependent on distance from the soma <a href="#pcbi.1002521-Migliore1">[26]</a>. In order to support such functionality, the language must have formal semantics for composition and extension.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[3]/p[4]">Layer-based components in a biological modeling language can express different functional and structural relationships and allow scientists to invent and share their own components, as well as build on the existing mechanisms.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/title[1]">When and how to use the layer-oriented approach</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[1]">One of the most important problems facing biological modeling languages is formulating the extent and requirements of the target domain. The layer-oriented approach provides the technical means to formalize the relationships between the domains of biological modeling and mathematical formalisms, but the researchers who wish to design and use such a language must already have some informal understanding of these relationships.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[2]">Once the domain is well-defined in terms of mathematical formalisms, as is the case with deterministic models of ionic currents in computational neuroscience, our layer-oriented approach can be applied by constructing a formal grammar for the language and corresponding transformation rules that explicitly link the biological modeling concepts to mathematical formalisms. As we show in Section <a href="#s4">Methods</a>, the transformation rules can be written in a metalanguage that generalizes the typical patterns of programming languages without the operational details of a real implementation. The process of writing and understanding such rules assists researchers in clarifying and refining the semantics of the language, as Scott and Strachey showed in their influential work on programming language specification <a href="#pcbi.1002521-Scott1">[27]</a>, <a href="#pcbi.1002521-Schmidt1">[28]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[3]">Constructing a set of transformation rules for a given biological modeling concept may be a whole scientific endeavor, such as, for example, approximating the voltage dynamics of 3D cell membranes with the 1D cable formalism commonly used in computational neuroscience <a href="#pcbi.1002521-Rall1">[29]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[4]">Furthermore, our approach relies on a mathematical language that is sufficiently rich to formulate all concepts and problems of the scientific field of interest. The development of computational science suggests that mathematical languages based on ODEs and PDEs are well-suited to express many theories and concepts of physics and chemistry. However, additional formalisms, such as stochastic equations, may be necessary to model problems in computational biology. The layer-oriented approach as a method for interoperability assumes that such additional formalisms would be consistently supported by several software platforms.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[5]">It is possible that for some biological concepts there exist semantic ambiguities, i.e. several alternative mathematical formulations. The layer-oriented approach is modular and can accommodate different sets of transformation rules for the same concepts in the form of namespaces or modules <a href="#pcbi.1002521-Jagannathan1">[30]</a>, but ultimately it is the responsibility of the language designers to use such technical tools to resolve the differences between the mathematical approaches.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[6]">The layer-oriented approach would not be applicable in a case where a biological modeling concept has only an empirical algorithmic representation and no consistent underlying mathematical theory. This is a consequence of the declarative nature of the approach. For example, the exact stochastic simulation algorithm (SSA) is widely used in computational biology <a href="#pcbi.1002521-Gillespie1">[31]</a>. However, the necessity to simulate every reaction event causes the algorithm to be too slow for some applications. An approximation strategy known as tau-leaping sacrifices exactness for reduced computational cost <a href="#pcbi.1002521-Gillespie2">[32]</a>. At present there is no widely adopted declarative generalization of SSA and tau-leaping, although proposals have been made <a href="#pcbi.1002521-Spicher1">[33]</a>. Applying the layer-oriented approach to modeling problems based on tau-leaping, or other approximations of SSA, would require that the various decision procedures involved are represented in a declarative form that reflects the underlying mathematical model. In this sense our approach is limited by the scientific understanding of the concepts in the particular modeling domain.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[4]/p[7]">Another important aspect of designing biological modeling language is the process of community validation. For instance, the community validation process of SBML Level 3 involves having at least two independent software implementations of a proposed feature before that feature can be considered for inclusion in the standard. From our personal observations on the development process of the emerging NineML language, the NineML committee has also converged on peer-reviewing implementation code as means to ensure that prototype implementations of the language not only have the same grammar, but also have consistent and community-approved semantics. However, the informal processes of SBML and NineML are limited by the fact that code in different programming languages cannot in general be directly compared. The layer-oriented approach is a way to lift this restriction. It enables the community first to agree on the semantic transformation rules, then to relate them to particular software implementation. It does not mandate a particular implementation, or a particular programming language, and thus can be used by a diverse community of developers. As a further step in language specification, the layer-oriented approach opens the possibility for using mathematical reasoning methodologies <a href="#pcbi.1002521-Paulson1">[34]</a> to formally prove that a particular software implementation is faithful to a particular set of semantic transformation rules.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/title[1]">Declarative and algorithmic languages</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/p[1]">Variations of the layer-oriented approach are not new to computational neuroscience. The NEURON simulator has pioneered the use of an introspective interpreter (HOC or Python) and a declarative model description language (NMODL) for extending the available modeling mechanisms.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/p[2]">However, the work presented here is specifically concerned with layers of purely declarative languages. In our approach, the interfaces between layers are explicitly specified in an implementation-neutral mathematical notation and additional layers can be introduced in a consistent and conceptually clear manner. In contrast, simulators such as NEURON typically employ an algorithmic language for experiment control and a declarative language for model equations, and the details of interfacing the two languages are unique to the particular software implementation.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/p[3]">Declarative languages describe problems in a particular domain, and possibly some properties of the desired solutions, rather than explicit mechanisms for computing solutions <a href="#pcbi.1002521-Hanus1">[35]</a>, <a href="#pcbi.1002521-Lloyd1">[36]</a>. Algorithmic languages take the form of stepwise machine instructions for performing computation. Algorithmic languages have much greater expressive power than declarative ones, however they introduce operational details that might be entirely irrelevant to the higher-level concepts that they express.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/p[4]">Because of the expressiveness of algorithmic languages, it could be argued that all tasks in neuroscience simulation and modeling could be accomplished with a combination of NMODL and HOC or Python, or similar combination of declarative and algorithmic languages. However, the many engineering details of interfacing such languages – variable scoping, data representation and propagation, control flow – would make any such combination of languages unique and difficult to comprehend and to replicate in different software implementations.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[5]/p[5]">Because in our approach each layer is declarative and constrained to a specific purpose, a complete set of rules can be given for how the different layers relate to one another and how executable code can be generated from a layer-based description. Such rules then provide a convenient blueprint for consistent and interoperable software implementations.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/title[1]">Existing biological modeling languages</h4>
<h5 xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[1]/title[1]">NeuroML.</h5><p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[1]/p[1]">The primary goals of the NeuroML family of modeling languages <a href="#pcbi.1002521-Gleeson1">[6]</a>, <a href="#pcbi.1002521-Goddard1">[7]</a> are ability to express commonly used concepts in computational neuroscience and support of a large number of published models. To achieve these goals, the NeuroML development team has been focused on defining language concepts that closely correspond to the modeling idioms used by existing and well-established simulators, such as NEURON and GENESIS.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[1]/p[2]">However, a number of sweeping changes to the language were found necessary by the NeuroML team when it was decided to support the PSICS software <a href="#pcbi.1002521-Cannon2">[37]</a> as a simulation platform. This restructuring revealed some weaknesses of NeuroML 1.x, which are consistent with our experiences with describing the Khaliq-Raman model using ChannelML versions 1.6.x and 1.7.1. We can summarize these weaknesses in the following categories:</p>


<ol class="order">

<li xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[1]/list[1]/list-item[1]">Lack of formally-defined semantics for the elements of the language: The ChannelML 1.x standard does not give the precise mathematical definition of its concepts, nor how each concept relates to the other structures in the language. It merely states that a ‘ChannelType’ entity could contain an ‘hh_gate’ or a ‘ks_gate’, but the proper mathematical and/or algorithmic background is not given anywhere in the specification.<br>The problem with this approach is that it is very difficult to ensure consistent semantics when transforming ChannelML models to code for particular simulators and analysis software, such as NEURON and XPP <a href="#pcbi.1002521-Ermentrout1">[38]</a>.</li>

<li xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[1]/list[1]/list-item[2]">A lack of means to specify conductance and current laws: The lack of a mathematical model for ChannelML means that no support is provided for non-Ohmic definitions of conductance and current, such as the Goldman-Hodgkin-Katz formalism.</li>

</ol>
<h5 xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[2]/title[1]">SBML and CellML.</h5><p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[2]/p[1]">SBML <a href="#pcbi.1002521-Hucka1">[8]</a>, <a href="#pcbi.1002521-Hucka2">[9]</a> and CellML <a href="#pcbi.1002521-Cuellar1">[10]</a> are two well-known XML-based model exchange formats used in the life sciences. SBML in particular is well supported by a wide array of software packages. SBML is designed so as to capture several biophysical concepts at the core language level. For example, chemical reactions and species are an integral part of the language core. SBML was originally developed for exchange of monolithic models between simulation programs and its Level 1 and 2 specifications did not support reusable model components <a href="#pcbi.1002521-Hucka3">[39]</a>. SBML Level 3 is developed as a modular language and its specification is organized in a central core and extension packages layered on top of this core <a href="#pcbi.1002521-Hucka1">[8]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[2]/p[2]">CellML version 1.1 is more abstract and provides a component abstraction with flexibility sufficient to model different types of biological concepts. A CellML component can be an entirely conceptual entity created for modeling convenience, or it can have some real physical interpretation (for example, it could represent the cell membrane). CellML allows several kinds of relationships between components to be expressed, such as containment or connectivity.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[2]/p[3]">However, the component model of CellML 1.1 does not permit user-defined component relationships in a semantically meaningful way, nor does it support parametric components. Furthermore, the CellML specification offers few guidelines for how to produce well-structured, layered models. A mathematical model of a biological process can be represented in CellML in many different ways and the structure of a model mainly depends on the style of the individual author. Wimalaratne et al. have published guidelines for structuring CellML models, which encourage hierarchical structuring and reusable components with generic mathematical expressions <a href="#pcbi.1002521-Wimalaratne1">[19]</a>. But as the CellML specification and tools do not currently support the codification of these informal guidelines, the biophysical concepts isolated in one CellML model cannot be conveyed in a machine-readable format to the software that interprets this model.</p>

<h5 xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[3]/title[1]">InsilicoML.</h5><p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[3]/p[1]">InsilicoML (ISML) is a language that can explicitly describe hierarchical structures of physiological functions in a mathematical model <a href="#pcbi.1002521-Asai1">[40]</a>. In ISML, each part of a model is called a module and relationships between modules are defined as edges. ISML is fully compatible with CellML 1.0 and adds features to annotate models with ontological information and links to model databases.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[3]/p[2]">ISML features extensive support for spatial PDEs and its modularity features are an evolutionary improvement over CellML. Two unique features of ISML are the morphology and time series data types, which allow direct integration of models with experimental data.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[3]/p[3]">Efforts such as ISML highlight the importance of layered semantic specification for biological modeling languages. In systems biology, models that integrate heterogeneous experimental data, which are stored in numerous life-science databases, can have considerable errors in data integration if different sources do not describe their information consistently <a href="#pcbi.1002521-Philippi1">[41]</a>. Furthermore, a layer-oriented approach can be used to formally describe the features unique to ISML and incorporate them in other modeling languages and existing software.</p>

<h5 xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/title[1]">PyNN.</h5><p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/p[1]">PyNN is a software package for simulator-independent specification of neuronal network models <a href="#pcbi.1002521-Davison1">[42]</a>. PyNN allows the users to write network model code in the Python programming language, and then run it without modification on any of the four simulators supported by PyNN.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/p[2]">The PyNN API is mainly aimed at describing populations of neurons and the connections between them. Neuronal dynamics are described not on the equation level, but are referenced via a library of standard neuron types. PyNN can express concepts commonly found in neuronal network modeling, however the exact computational semantics remain implicit in the targeted simulator platforms.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/p[3]">Reproducibility of results in different simulators can be achieved with PyNN only for those models that are a part of the pre-defined neuron library. Extending the repertoire of models supported by PyNN is achieved by implementing the necessary extensions in Python using specific internal APIs.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/p[4]">Our approach differs than that of PyNN in two ways. First, the layer-oriented language presented here is not a collection of models, but a collection of general concepts, such as Ohmic currents and differential equations, that can be then utilized to build particular models. This means that, as long as a model is expressible with these concepts, executable code can be automatically generated for this model by applying common semantic transformation rules and performing a final code generation step for the specific executable target.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[6]/sec[4]/p[5]">Second, the specification of a layer-based model description language is intended to be independent of the semantics of the implementation language and thus our semantic transformation rules are given in a notation that is easy to encode in general-purpose programming languages, but is not biased towards a specific one. If, for example, one wished to implement some or all of the functionality of PyNN in a language such as Java, then they must find a way to translate the idioms of Python and the data structures and algorithms of PyNN to a suitable and idiomatic Java representation. Our semantic transformation rules rely on simple pattern match (destructuring), function call, list/set construction and decomposition. These are all operations present in the popular programming languages of today and thus it is possible for PyNN to accommodate our semantic transformation functions.</p>



<h4 xpathLocation="/article[1]/body[1]/sec[3]/sec[7]/title[1]">Summary</h4>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[7]/p[1]">Designing modeling languages involves the translation of the concepts of the domain into semantic concepts appropriate for computer representation. Often the transformation from domain-specific concepts into computer code cannot be done in a single step but requires several intermediate steps. The layer-oriented approach is an attempt to discern these intermediate semantic steps.</p>
<p xpathLocation="/article[1]/body[1]/sec[3]/sec[7]/p[2]">The layer-oriented approach relies heavily on model structuring. Structuring is a common modeling technique of dividing an object into a number of parts and indicating relationships between these parts. In this way quite naturally a layered model arises. Our prototype language defines a form of structuring based on components that allows models of arbitrary complexity to be constructed. In this way, the language provides extensibility and flexibility in describing new models that involve detailed biophysical modeling.</p>

</div>

<div id="section4" xpathLocation="/article[1]/body[1]/sec[4]"><a id="s4" name="s4" toc="s4" title="Methods"></a><h3 xpathLocation="noSelect">Methods&nbsp;<a href="#top">Top</a></h3><p xpathLocation="/article[1]/body[1]/sec[4]/p[1]">Our approach is inspired by the work of Scott and Strachey on the mathematical foundations of the semantics of programming languages <a href="#pcbi.1002521-Scott1">[27]</a>. Scott and Strachey attempted to formalize and make explicit the meta-theories intuitively employed by language designers, and developed solid mathematical methods for language engineering <a href="#pcbi.1002521-Schmidt1">[28]</a>. Their approach resulted in clear, concise and unambiguous specification of programming language semantics and compiler transformations.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/p[2]">Among the innovations of Scott and Strachey was a calculus for semantic description in the form of a minimal metalanguage based on the lambda calculus <a href="#pcbi.1002521-Cardone1">[43]</a>. Our metalanguage is based on a small subset of the Standard ML programming language <a href="#pcbi.1002521-Milner1">[44]</a> and is summarized in the following section.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/p[3]">While the present paper cannot include an exhaustive discussion of the software engineering methods for constructing a layer-oriented language, Paulson's “ML for the Working Programmer” <a href="#pcbi.1002521-Paulson1">[34]</a> has a practical introduction on modeling domain concepts as mathematical objects, while Gunter's textbook on semantics <a href="#pcbi.1002521-Gunter1">[45]</a> is an in-depth treatise on the mathematical foundations of programming languages.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/p[4]">From the point of view of domain-specific languages, our approach is most closely related to the pipeline pattern identified by Spinellis <a href="#pcbi.1002521-Spinellis1">[46]</a>. The pipeline pattern involves a chain of domain-specific language processors that are each dedicated to a specific sub-language. As Spinellis points out, “often a system can best be described using a family of DSLs,” and, “the use of the pipeline pattern encourages the division of responsibility among small specialised DSLs and discourages bloated feature-rich language designs.” Our approach refines the pipeline pattern in that all possible transformation paths are explicit, thus allowing a more rigorous process of validating and extending the language, but possibly at the loss of some flexibility.</p>

<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[1]/title[1]">Metalanguage definitions</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[1]/p[1]">The following syntactic constructs are used in the metalanguage:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e009&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e010&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e011&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e012&amp;representation=PNG"></span><br>Expressions in the metalanguage are typically constructors for the various data structures that correspond to the domain-specific syntaxes discussed in this paper. For example, the definition<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e013&amp;representation=PNG"></span><br>means that metafunction <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e014&amp;representation=PNG"></span> matches the sequence consisting of the symbol <span class="monospace">const</span>, followed by the pattern variable <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e015&amp;representation=PNG"></span> (which must be of a defined type), the symbol = and the pattern variable <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e016&amp;representation=PNG"></span>. The result of the function is an entry constructed using the pattern variables and the <span class="monospace">Parameter</span> constructor defined previously.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[2]/title[1]">An ionic current description language</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[2]/p[1]">The language we have developed for describing models of ionic currents has a hierarchical structure that is meant to reflect the logical relationships between the different parts of ionic current descriptions. For example, an Ohmic current consists of ionic current name, gating dynamics description and maximal conductance definition.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[2]/p[2]">The syntax of this language in Backus-Naur form <a href="#pcbi.1002521-Backus1">[47]</a> is given below. We note that the definition of the Equation domain is not part of this language but refers to the equation-oriented language in the next section.<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e017&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e018&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e019&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e020&amp;representation=PNG"></span><br></p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/title[1]">An equation-oriented language</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[1]">We base our layer-oriented approach on a domain-specific language that is capable of expressing differential and algebraic equations and later use it to construct complex models of ionic currents.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[2]">The language has a simple syntax for expressing relations and first-order differential equations, and we define a transformation function on this syntax that transforms every declaration in the language to an intermediate form suitable for further processing, such as code generation, or some type of model transformation, such as parameter perturbation.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[3]">The syntax of this language in Backus-Naur form is:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e021&amp;representation=PNG"></span><br><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e022&amp;representation=PNG"></span> [Constant during integration]</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[4]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e023&amp;representation=PNG"></span> [Algebraic equation]</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[5]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e024&amp;representation=PNG"></span> [Relation]</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[6]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e025&amp;representation=PNG"></span> [ODE of the form dx/dt = e]</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[7]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e026&amp;representation=PNG"></span> [Forward kinetic scheme]</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[3]/p[8]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e027&amp;representation=PNG"></span> [Forward and reverse kinetic scheme]</p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/title[1]">Identifiers, entities, environments</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/p[1]">The equation-oriented language is transformed to an intermediate semantic form suitable for further processing. We use an intermediate language of the following form:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e028&amp;representation=PNG"></span><br>where</p>


<ul>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/list[1]/list-item[1]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e029&amp;representation=PNG"></span> is the identifier we use to refer to this entity;</li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/list[1]/list-item[2]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e030&amp;representation=PNG"></span> is one of <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e031&amp;representation=PNG"></span>, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e032&amp;representation=PNG"></span>, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e033&amp;representation=PNG"></span>, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e034&amp;representation=PNG"></span>, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e035&amp;representation=PNG"></span></li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/list[1]/list-item[3]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e036&amp;representation=PNG"></span> represents the argument of a relation or the state variables in ODEs and reactions;</li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/list[1]/list-item[4]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e037&amp;representation=PNG"></span> is the right-hand side arithmetic expression</li>

</ul><p xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/p[2]">The transformation function <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e038&amp;representation=PNG"></span> describes the process of creating new entities:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e039&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e040&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e041&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e042&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e043&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[4]/p[3]">Entities are characterized by name, type and expression. However, we must use these entities together in order to solve the corresponding system of equations. We use an environment structure in which entities are indexed by name and type, and which can be queried to extract information for further model processing. We represent environments by a function<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e044&amp;representation=PNG"></span><br>which we call the current environment of entities. We use the metafunction notation <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e045&amp;representation=PNG"></span> to express the extension of the current environment with a new entity.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/title[1]">Component language</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[1]">The syntax of the component language in Backus-Naur form is:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e046&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e047&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e048&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[2]">We use the set of types defined above to identify structures specific to ionic current models, although the schema of supported types can be naturally extended to support a broader range of modeling concepts. The transformation function <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e049&amp;representation=PNG"></span> transforms the component syntax into nested environments:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e050&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e051&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e052&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[3]">The metafunction <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e053&amp;representation=PNG"></span> returns the set of names defined in the given environment. The transformation function <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e054&amp;representation=PNG"></span> is as defined before. We do not define the case when the list of output entities is not a subset of the entities defined in the given component, but a real implementation must signal an error in such case.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[4]">Furthermore, although our definitions allow the nesting of environments, our target numerical platforms, such as Matlab, do not necessarily support namespace control. In order to generate code for such environments, we must conduct <em>flattening</em> of the nested environments, so that all identifiers can occupy the same namespace without collision.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[5]">The transformation function <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e055&amp;representation=PNG"></span> flattens nested environments by replacing all identifiers with explicit paths based on their enclosing environments:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e056&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e057&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e058&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[5]/p[6]">The metafunction <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e059&amp;representation=PNG"></span> substitutes identifiers in an expression, given a substitution environment that maps identifiers to expressions. The metafunction <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e060&amp;representation=PNG"></span> builds nested substitution environments: during the substitution process, if an identifier is not found in the immediate environment, it is looked up in the enclosing environment, and so on.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[6]/title[1]">Membrane potential transformation function</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[6]/p[1]">Let <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e061&amp;representation=PNG"></span> denote the set of components of type <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e062&amp;representation=PNG"></span> contained in the environment <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e063&amp;representation=PNG"></span>. Let <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e064&amp;representation=PNG"></span> indicate the outputs declared for component <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e065&amp;representation=PNG"></span>. <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e066&amp;representation=PNG"></span> can then be defined as follows:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e067&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e068&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e069&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[6]/p[2]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e070&amp;representation=PNG"></span> and <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e071&amp;representation=PNG"></span> take an additional argument, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e072&amp;representation=PNG"></span>, which indicates the current scope, or environment nesting path. The path specified by <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e073&amp;representation=PNG"></span> is used to disambiguate the variable names that are used in the current and voltage equations that are constructed by the transformation functions.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[6]/p[3]">The transformation functions defined above require that ionic current models consist of one component of type <span class="monospace">membrane-capacitance</span>, and one or more components of type <span class="monospace">Ohmic-current</span>. Components of type <span class="monospace">Ohmic-current</span> must in turn contain one or more components of type <span class="monospace">gating</span> (gate dynamics), one component of type <span class="monospace">pore</span> (maximal conductance) and one component of type <span class="monospace">permeating-ion</span> (reversal potential).</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[6]/p[4]">The <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e074&amp;representation=PNG"></span> procedure takes input in the form of nested environments. We rely on the metafunctions <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e075&amp;representation=PNG"></span> and <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e076&amp;representation=PNG"></span> to perform operations on a list of components. <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e077&amp;representation=PNG"></span> applies a given function to every member of a list of components and returns a list of the results. <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e078&amp;representation=PNG"></span> (also known as <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e079&amp;representation=PNG"></span> in Python or <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e080&amp;representation=PNG"></span> in C++) iterates a given function over a list of components and builds up a cumulative result.</p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[7]/title[1]">Gating dynamics transformation function</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[7]/p[1]">The transformation function for HH-gating-dynamics has the following definition:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e081&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e082&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e083&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e084&amp;representation=PNG"></span><br></p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[8]/title[1]">Extended membrane potential transformation function</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[8]/p[1]">To support the GHK formalism, we first extend the grammar of the ionic current description language from the beginning of this section with the requisite clauses:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e085&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e086&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e087&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e088&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e089&amp;representation=PNG"></span><br>Then <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e090&amp;representation=PNG"></span> must be extended with matching clauses:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e091&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e092&amp;representation=PNG"></span><br></p>


<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/title[1]">Abstract code generation</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[1]">Having defined the structures for describing ionic currents and component-based systems of equations, we can now define a transformation function that takes in an environment of entities as input and produces code for a given solver API. We abstract away the details of implementation by using idealized mathematical structures that mimic the structure of the target API. Nevertheless, we indicate what procedures are necessary to turn our abstract notation into concrete programming language syntax.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[2]">We first define a code generation function for a Matlab-like language, following the API required by the Matlab ODE solver: <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e093&amp;representation=PNG"></span> where <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e094&amp;representation=PNG"></span> receives the independent variable <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e095&amp;representation=PNG"></span> and a state vector <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e096&amp;representation=PNG"></span> and must return the vector of derivatives that corresponds to the given input.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[3]">In order to proceed with code generation, we must have the following representation of the system of equations:</p>


<ul>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/list[1]/list-item[1]">An ordered list of parameters and algebraic assignments: if any assignments or parameters depend on one another, we must order them appropriately and ensure no circular assignments are present.</li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/list[1]/list-item[2]">A list of relations: relations take the form of function declarations in Matlab and most other numerical computing environments.</li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/list[1]/list-item[3]">A list of differential equations</li>

<li xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/list[1]/list-item[4]">A mapping that assigns integer indices to state variable names: we use this mapping to retrieve state values from the initial state vector and to construct the vector of derivatives.</li>

</ul><p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[4]">We first define transformation function, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e097&amp;representation=PNG"></span>, which computes the free variables of every expression and orders the entries in the environment according the dependencies in their associated expression:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e098&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e099&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e100&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e101&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e102&amp;representation=PNG"></span><br>where the metafunction <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e103&amp;representation=PNG"></span> computes the free variables in an expression, and <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e104&amp;representation=PNG"></span> inserts a new entry in an ordered collection according to a partial order predicate:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e105&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[5]">Given an ordered environment <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e106&amp;representation=PNG"></span>, we can now define a transformation function to construct a structure suitable for input to code generation procedures. In this particular case, our target structure is a 5-tuple of the form:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e107&amp;representation=PNG"></span><br>The last element in the tuple is a mapping between state vector indices and state variable names.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[6]">The transformation function can then be defined as follows:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e108&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e109&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e110&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e111&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e112&amp;representation=PNG"></span><br>We use the <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e113&amp;representation=PNG"></span> characters to indicate tuple construction, the <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e114&amp;representation=PNG"></span> metafunction to indicate list concatenation and the <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e115&amp;representation=PNG"></span> metafunction returns the largest integer plus one from the given map.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/p[7]">The concrete code generation procedures can be defined as follows:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e116&amp;representation=PNG"></span><br>Each of the <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e117&amp;representation=PNG"></span> metafunctions are relatively simple procedures that map the abstract representation to the concrete syntax of the target language. foreach applies the given procedure to each element of the given list.</p>
<h5 xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/title[1]">Code generation specific to neuroscience modeling software.</h5><p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/p[1]">From a code generation point of view, the component mechanism facilitates the generation of code for neuroscience-specific software environments, such as NEURON. The code generation process for NMODL uses the same transformation functions as for Matlab, but it requires one additional transformation function, <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e118&amp;representation=PNG"></span>.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/p[2]"><span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e119&amp;representation=PNG"></span> extracts information about the ionic currents and gate complexes present in the model description and uses this information to generate declarations required for NMODL. The structure with information specific to ionic current models has the following definition:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e120&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e121&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e122&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e123&amp;representation=PNG"></span><br></p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/p[3]">This structure contains the definitions of ionic currents, along with information about the names of permeating and accumulating ions. This is necessary in order to generate the appropriate USEION and RANGE statements for NMODL.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/p[4]">The transformation function to build <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e124&amp;representation=PNG"></span> takes entities as input and can be defined as follows:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e125&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e126&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e127&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e128&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e129&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e130&amp;representation=PNG"></span><br>In the definition above, + is the string concatenation operator and is used to construct names for the ionic currents and reversal potentials for the specified ionic species.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[1]/p[5]">The NMODL code generation function can be defined as follows:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e131&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e132&amp;representation=PNG"></span><br></p>

<h5 xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[2]/title[1]">Simulation experiment code generation.</h5><p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[2]/p[1]">The code generation procedures for simulation experiments are analogous with those in the previous sections. We assume that the simulation code generators for particular platforms take the form of templates instantiated by substitution, such as the ones employed by the Brian simulator <a href="#pcbi.1002521-Goodman1">[18]</a>.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[2]/p[2]">In the case of voltage clamp simulation experiments, we assume the following template interface:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e133&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e134&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e135&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e136&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e137&amp;representation=PNG"></span><br>That is, we assume the target voltage clamp procedure receives a model name, names of the current variables and a list of voltage clamp parameters for each current.</p>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[9]/sec[2]/p[3]">The transformation function for voltage clamp script generation is then:<br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e138&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e139&amp;representation=PNG"></span><br><br><a name="" id=""></a><span class="equation"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e140&amp;representation=PNG"></span><br>The procedure <span class="inline-formula"><img src="/article/fetchObject.action?uri=info:doi/10.1371/journal.pcbi.1002521.e141&amp;representation=PNG"></span> collects all voltage clamp parameter sets from the given model environment and, if the given current names correspond to the model current names, replaces the membrane potential equation with an equation that keeps the potential at the given initial value.</p>



<h4 xpathLocation="/article[1]/body[1]/sec[4]/sec[10]/title[1]">Implementation study</h4>
<p xpathLocation="/article[1]/body[1]/sec[4]/sec[10]/p[1]">We have conducted an implementation study of a prototype layer-oriented language for describing models of ionic currents. The implemented prototype is closely related to the semantics presented in this paper, but is not identical. The software is available for download at <a href="http://wiki.call-cc.org/nemo">http://wiki.call-cc.org/nemo</a>. It is developed in the Scheme programming language using the Chicken Scheme compiler (<a href="http://www.call-cc.org/">http://www.call-cc.org/</a>). The Scheme and Lisp family of languages have a long tradition of domain-specific language development <a href="#pcbi.1002521-Shivers1">[48]</a> and are intrinsically suitable for XML processing <a href="#pcbi.1002521-Kiselyov1">[17]</a>.</p>

</div>

<div id="section5" xpathLocation="/article[1]/body[1]/sec[5]"><a id="s5" name="s5" toc="s5" title="Supporting Information"></a><h3 xpathLocation="noSelect">Supporting Information&nbsp;<a href="#top">Top</a></h3><a name="pcbi.1002521.s001" id="pcbi.1002521.s001"></a><p><strong xPathLocation="noSelect"><a href="/article/fetchSingleRepresentation.action?uri=info:doi/10.1371/journal.pcbi.1002521.s001">Figure S1. </a></strong></p><p xpathLocation="/article[1]/body[1]/sec[5]/supplementary-material[1]/caption[1]/p[1]"><strong>NEURON simulation run times averaged over 100 trials.</strong> A) NMODL mechanisms merged into one file; B) NMODL mechanisms in separate files. In all cases, NEURON 7.1 was used for 2000 ms of simulation time. Method cnexp indicates that NEURON's modified Crank-Nicolson method is used for solving the equations of all currents. Method cnexp+sparse indicates that NEURON's special method for kinetic equations is used for solving the equations of the resurgent sodium current and the modified Crank-Nicolson method is used for solving the equations of all other currents. Method cvode indicates that the CVODE variable step method is used for solving the equations of all currents. The hardware used was Dell Precision T5400 (CPU Intel Xeon E5430 2.66 GHz) for the Linux platform, and Apple Computer MacPro1,1 (CPU Intel Xeon 5150 2.66 GHz×2) for the Mac OS X platform.</p>
<p xpathLocation="/article[1]/body[1]/sec[5]/supplementary-material[1]/caption[1]/p[2]">(TIF)</p>
<a name="pcbi.1002521.s002" id="pcbi.1002521.s002"></a><p><strong xPathLocation="noSelect"><a href="/article/fetchSingleRepresentation.action?uri=info:doi/10.1371/journal.pcbi.1002521.s002">Text S1. </a></strong></p><p xpathLocation="/article[1]/body[1]/sec[5]/supplementary-material[2]/caption[1]/p[1]"><strong>A layer-oriented description of the 2003 Purkinje neuron model due to Khaliq et al.</strong> Shown are two representations of the model. The first utilizes a concise parenthesized syntax, which is more convenient for human users to write. The second is canonical XML representation suitable for automatic exchange between different software. The two formats are completely interchangeable and our prototype software NEMO supports reading and writing both.</p>
<p xpathLocation="/article[1]/body[1]/sec[5]/supplementary-material[2]/caption[1]/p[2]">(PDF)</p>
</div>





<div xpathLocation="noSelect"><a id="ack" name="ack" toc="ack" title="Acknowledgments"></a><h3 xpathLocation="noSelect">Acknowledgments&nbsp;<a href="#top">Top</a></h3>
<p xpathLocation="/article[1]/back[1]/ack[1]/p[1]">The authors wish to thank Sungho Hong and Mario Negrello for comments on early drafts, Iain Hepburn for punctuation corrections, as well as the anonymous reviewers whose constructive comments contributed significantly to improving the paper. The authors also wish to extend special thanks to the Chicken Scheme community for developing and maintaining the Chicken compiler and software ecosystem, which have been used to develop the prototype software for this paper.</p>
</div><div class="contributions"><a id="authcontrib" name="authcontrib" toc="authcontrib" title="Author Contributions"></a><h3 xpathLocation="noSelect">Author Contributions&nbsp;<a href="#top">Top</a></h3><p xpathLocation="noSelect">Wrote the paper: IR EDS. Designed and implemented the prototype software: IR. </p></div><div xpathLocation="noSelect"><a id="references" name="references" toc="references" title="References"></a><h3 xpathLocation="noSelect">References&nbsp;<a href="#top">Top</a></h3><ol class="references" xpathLocation="noSelect"><li xpathLocation="noSelect"><a name="pcbi.1002521-Cannon1" id="pcbi.1002521-Cannon1"></a>Cannon R, Gewaltig MO, Gleeson P, Bhalla U, Cornelis H, et al.  (2007) Interoperability of neuro-science modeling software: Current status and future directions. Neuroinformatics  5: 127–138.  <a class="find" href="/article/findArticle.action?citedArticleID=4753951">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-DeSchutter1" id="pcbi.1002521-DeSchutter1"></a>De Schutter E (2008) Why are computational neuroscience and systems biology so separate? PLoS Comput Biol  4: e1000078. 
        doi:
        <a href="http://dx.doi.org/10.1371/journal.pcbi.1000078">10.1371/journal.pcbi.1000078</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753953">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Bower1" id="pcbi.1002521-Bower1"></a>Bower J, Beeman D (1998) The Book of GENESIS: Exploring Realistic Neural Models with the GEneral NEural SImulation System. New York: Springer-Verlag.   </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Carnevale1" id="pcbi.1002521-Carnevale1"></a>Carnevale N, Hines M (2006) The NEURON Book. UK: Cambridge University Press.   </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Hodgkin1" id="pcbi.1002521-Hodgkin1"></a>Hodgkin A, Huxley A (1952) A quantitative description of membrane current and its application to conduction and excitation in nerve. J Physiol  117: 500–544.  <a class="find" href="/article/findArticle.action?citedArticleID=4753959">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Gleeson1" id="pcbi.1002521-Gleeson1"></a>Gleeson P, Crook S, Cannon R, Hines M, Billings G, et al.  (2010) NeuroML: A language for describing data driven models of neurons and networks with a high degree of biological detail. PLoS Comput Biol  6: e1000815. 
        doi:
        <a href="http://dx.doi.org/10.1371/journal.pcbi.1000815">10.1371/journal.pcbi.1000815</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753961">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Goddard1" id="pcbi.1002521-Goddard1"></a>Goddard N, Hucka M, Howell F, Cornelis H, Shankar K, et al.  (2001) Towards NeuroML: Model description methods for collaborative modeling in neuroscience. Philos Trans R Soc Lond B Biol Sci  356: 1209–1228. 
        doi:
        <a href="http://dx.doi.org/10.1098/rstb.2001.0910">10.1098/rstb.2001.0910</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753963">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Hucka1" id="pcbi.1002521-Hucka1"></a>Hucka M, Bergmann F, Hoops S, Keating S, Sahle S, et al.  (2010) Sys- tems biology markup language (SBML) Level 3 Version 1 Core.   Available: <a href="http://sbml.org/Documents/Specifications/SBML_Level_3">http://sbml.org/Documents/Specifications​/SBML_Level_3</a>. Accessed 7 April 2012.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Hucka2" id="pcbi.1002521-Hucka2"></a>Hucka M, Finney A, Bornstein B, Keating S, Shapiro B, et al.  (2004) Evolving a lingua franca and associated software infrastructure for computational systems biology: the systems biology markup language (SBML) project. Syst Biol  1: 41–53. 
        doi:
        <a href="http://dx.doi.org/10.1049/sb:20045008">10.1049/sb:20045008</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753967">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Cuellar1" id="pcbi.1002521-Cuellar1"></a>Cuellar A, Nielsen P, Bullivant D, Hunter P (2003) CellML 1.1 for the definition and exchange of biological models. Proceedings of the 5th IFAC Symposium on Modelling and Control in Biomedical Systems. pp. 451–456.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Cuellar2" id="pcbi.1002521-Cuellar2"></a>Cuellar A, Nielsen P, Hallstead M, Bullivant D, Nickerson D (2002) CellML specification version 1.1.   Available: <a href="http://www.cellml.org/specifications/cellml_1.1">http://www.cellml.org/specifications/cel​lml_1.1</a>. Accessed 7 April 2012.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Raikov1" id="pcbi.1002521-Raikov1"></a>Raikov I, De Schutter E (2012) The promise and shortcomings of XML as an interchange format for computational models of biology. Neuroinformatics  10: 1–3. 
        doi:
        <a href="http://dx.doi.org/10.1007/s12021-011-9136-8">10.1007/s12021-011-9136-8</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753973">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Koehn1" id="pcbi.1002521-Koehn1"></a>Koehn D, Novere N (2008)  SED-ML – An XML Format for the Implementation of the MIASE Guidelines. In: Heiner M, Uhrmacher A, editors. Computational Methods in Systems Biology. Springer. pp. 176–190.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Bergmann1" id="pcbi.1002521-Bergmann1"></a>Bergmann F (2010) A simple nested simulation for SED-ML.   Nature Precedings. Available: <a href="http://precedings.nature.com/documents/4257/version/2">http://precedings.nature.com/documents/4​257/version/2</a>. Accessed 7 April 2012.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-DeSchutter2" id="pcbi.1002521-DeSchutter2"></a>De Schutter E (2009) The International Neuroinformatics Coordinating Facility: evaluating the first years. Neuroinformatics  7: 161–163.  <a class="find" href="/article/findArticle.action?citedArticleID=4753979">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Gennari1" id="pcbi.1002521-Gennari1"></a>Gennari J, Neal M, Galdzicki M, Cook D (2011) Multiple ontologies in action: Composite annotations for biosimulation models. J Biomed Inform  44: 146–154. 
        doi:
        <a href="http://dx.doi.org/10.1016/j.jbi.2010.06.007">10.1016/j.jbi.2010.06.007</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753981">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Kiselyov1" id="pcbi.1002521-Kiselyov1"></a>Kiselyov O (2004) XML in Scheme, version 3.0.   Available: <a href="http://okmij.org/ftp/Scheme/SXML.html">http://okmij.org/ftp/Scheme/SXML.html</a>. Accessed 7 April 2012.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Goodman1" id="pcbi.1002521-Goodman1"></a>Goodman D (2010) Code generation: a strategy for neural network simulators. Neuroinformatics  8: 183–196. 
        doi:
        <a href="http://dx.doi.org/10.1007/s12021-010-9082-x">10.1007/s12021-010-9082-x</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753985">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Wimalaratne1" id="pcbi.1002521-Wimalaratne1"></a>Wimalaratne S, Halstead M, Lloyd C, Cooling M, Crampin E, et al.  (2009) Facilitating modularity and reuse: guidelines for structuring CellML 1.1 models by isolating common biophysical concepts. Exp Physiol  94: 472–485. 
        doi:
        <a href="http://dx.doi.org/10.1113/expphysiol.2008.045161">10.1113/expphysiol.2008.045161</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753987">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Khaliq1" id="pcbi.1002521-Khaliq1"></a>Khaliq Z, Gouwens N, Raman I (2003) The contribution of resurgent sodium current to high- frequency firing in Purkinje neurons: An experimental and modeling study. J Neurosci  23: 4899–4912.  <a class="find" href="/article/findArticle.action?citedArticleID=4753989">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Clay1" id="pcbi.1002521-Clay1"></a>Clay J (2009) Determining K+ channel activation curves from K+ channel currents often requires the Goldman-Hodgkin-Katz equation. Front Cell Neurosci  3: 20. 
        doi:
        <a href="http://dx.doi.org/10.3389/neuro.03.020.2009">10.3389/neuro.03.020.2009</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753991">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-DeSchutter3" id="pcbi.1002521-DeSchutter3"></a>De Schutter E, Smolen P (1998)  Calcium dynamics in large neuronal models. In: Koch C, Segev I, editors. Methods in neuronal modeling: From ions to networks. 2nd edition. MIT Press. pp. 211–250.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Traub1" id="pcbi.1002521-Traub1"></a>Traub R (1982) Simulation of intrinsic bursting in CA3 hippocampal neurons. Neuroscience  7: 1233–1242. 
        doi:
        <a href="http://dx.doi.org/10.1016/0306-4522(82)91130-7">10.1016/0306-4522(82)91130-7</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4753995">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Burgun1" id="pcbi.1002521-Burgun1"></a>Burgun A, Bodenreider O (2008) Accessing and integrating data and knowledge for biomedical research. Yearb Med Inform  2008: 91–101.  <a class="find" href="/article/findArticle.action?citedArticleID=4753997">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Brunel1" id="pcbi.1002521-Brunel1"></a>Brunel N (2010)  Modeling point neurons: From Hodgkin-Huxley to integrate-and-fire. In: De Schutter E, editor. Computational Modeling Methods for Neuroscientists. MIT Press. pp. 161–186.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Migliore1" id="pcbi.1002521-Migliore1"></a>Migliore M, Hoffman D, Magee J, Johnston D (1999) Role of an A-type K+ conductance in the back- propagation of action potentials in the dendrites of hippocampal pyramidal neurons. J Comput Neurosci  7: 5–15.  <a class="find" href="/article/findArticle.action?citedArticleID=4754001">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Scott1" id="pcbi.1002521-Scott1"></a>Scott D, Strachey C (1971) Toward a mathematical semantics for computer languages. Proceedings of the Symposium on Computers and Automata. pp. 19–46.  volume XXI.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Schmidt1" id="pcbi.1002521-Schmidt1"></a>Schmidt D (2000) Induction, domains, calculi: Strachey's contributions to programming-language engineering. Higher-Order and Symbolic Computation  13: 89–101.  <a class="find" href="/article/findArticle.action?citedArticleID=4754005">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Rall1" id="pcbi.1002521-Rall1"></a>Rall W, Agmon-Snir H (1998)  Cable theory for dendritic neurons. In: Koch C, Segev I, editors. Methods in neuronal modeling: From ions to networks. 2nd edition. MIT Press. pp. 27–92.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Jagannathan1" id="pcbi.1002521-Jagannathan1"></a>Jagannathan S (1994) Metalevel building blocks for modular systems. ACM Trans Program Lang Syst  16: 456–492. 
        doi:
        <a href="http://dx.doi.org/10.1145/177492.177578">10.1145/177492.177578</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754009">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Gillespie1" id="pcbi.1002521-Gillespie1"></a>Gillespie D (2007) Stochastic simulation of chemical kinetics. Annu Rev Phys Chem  58: 35–55. 
        doi:
        <a href="http://dx.doi.org/10.1146/annurev.physchem.58.032806.104637">10.1146/annurev.physchem.58.032806.104637</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754011">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Gillespie2" id="pcbi.1002521-Gillespie2"></a>Gillespie D (2001) Approximate accelerated stochastic simulation of chemically reacting systems. Annu Rev Phys Chem  115: 1716–1733. 
        doi:
        <a href="http://dx.doi.org/10.1063/1.1378322">10.1063/1.1378322</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754013">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Spicher1" id="pcbi.1002521-Spicher1"></a>Spicher A, Michel O, Giavitto J, Prusinkiewicz P (2008) Stochastic p systems and the simulation of biochemical processes with dynamic compartments. Biosystems  91: 458–473. 
        doi:
        <a href="http://dx.doi.org/10.1016/j.biosystems.2006.12.009">10.1016/j.biosystems.2006.12.009</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754015">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Paulson1" id="pcbi.1002521-Paulson1"></a>Paulson L (1996) Reasoning about functional programs. ML for the working programmer. 2nd edition. Cambridge University Press. pp. 213–256.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Hanus1" id="pcbi.1002521-Hanus1"></a>Hanus M (2007) Multi-paradigm declarative languages. Proceedings of the 23rd International Conference on Logic Programming (ICLP). Springer-Verlag. pp. 45–75.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Lloyd1" id="pcbi.1002521-Lloyd1"></a>Lloyd J (1994) Practical advantages of declarative programming. Proceedings of the 1994 Joint Conference on Declarative Programming, GULP-PRODE'94. pp. 18–30.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Cannon2" id="pcbi.1002521-Cannon2"></a>Cannon R, O'Donnell C, Nolan M (2010) Stochastic ion channel gating in dendritic neurons: Morphology dependence and probabilistic synaptic activation of dendritic spikes. PLoS Comput Biol  6: e1000886. 
        doi:
        <a href="http://dx.doi.org/10.1371/journal.pcbi.1000886">10.1371/journal.pcbi.1000886</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754023">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Ermentrout1" id="pcbi.1002521-Ermentrout1"></a>Ermentrout B (2002) Simulating, Analyzing, and Animating Dynamical Systems: A Guide to XPPAUT for Researchers and Students.   SIAM.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Hucka3" id="pcbi.1002521-Hucka3"></a>Hucka M, Finney A, Hoops S, Keating S, Novere N (2008) Systems biology markup language (SBML) Level 2 Version 4: Structures and facilities for model definitions.   Available: <a href="http://sbml.org/Documents/Specifications/SBML_Level_2/Version_4">http://sbml.org/Documents/Specifications​/SBML_Level_2/Version_4</a>. Accessed 7 April 2012.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Asai1" id="pcbi.1002521-Asai1"></a>Asai Y, Suzuki Y, Kido Y, Oka H, Heien E (2008) Specifications of insilicoML 1.0: A multilevel biophysical model description language. J Physiol Sci  58: 447–458. 
        doi:
        <a href="http://dx.doi.org/10.2170/physiolsci.RP013308">10.2170/physiolsci.RP013308</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754029">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Philippi1" id="pcbi.1002521-Philippi1"></a>Philippi S, Koehler J (2006) Addressing the problems with life-science databases for traditional uses and systems biology. Nat Rev Genet  7: 482–488. 
        doi:
        <a href="http://dx.doi.org/10.1038/nrg1872">10.1038/nrg1872</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754031">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Davison1" id="pcbi.1002521-Davison1"></a>Davison A, Bruederle D, Eppler J, Kremkow J, Muller E, et al.  (2008) PyNN: a common interface for neuronal network simulators. Front Neuroinform  2: 11. 
        doi:
        <a href="http://dx.doi.org/10.3389/neuro.11.011.2008">10.3389/neuro.11.011.2008</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754033">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Cardone1" id="pcbi.1002521-Cardone1"></a>Cardone F, Hindley J (2009)  Lambda-calculus and combinators in the 20th century. In: Woods J, Gabbay D, editors. Handbook of the History of Logic: Volume 5 – Logic From Russell to Church. North Holland: Elsevier. pp. 723–817.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Milner1" id="pcbi.1002521-Milner1"></a>Milner R, Tofte M, Harper R, MacQueen D (1997) The Definition of Standard ML, Revised Edition. MIT Press. 130 p.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Gunter1" id="pcbi.1002521-Gunter1"></a>Gunter C (1992) Semantics of programming languages: structures and techniques. MIT Press.   </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Spinellis1" id="pcbi.1002521-Spinellis1"></a>Spinellis D (2001) Notable design patterns for domain specific languages. J Syst Softw  56: 9199. 
        doi:
        <a href="http://dx.doi.org/10.1016/S0164-1212(00)00089-3">10.1016/S0164-1212(00)00089-3</a>.
       <a class="find" href="/article/findArticle.action?citedArticleID=4754041">
                      Find this article online
                    </a></li><li xpathLocation="noSelect"><a name="pcbi.1002521-Backus1" id="pcbi.1002521-Backus1"></a>Backus J, Bauer F, Green J, Katz C, McCarthy J, et al.  (1997)  Revised report on the algorithmic language ALGOL 60. In: O'Hearn P, editor. ALGOL-like Languages, Volume 1. Boston: Birkhauser. pp. 19–49.  </li><li xpathLocation="noSelect"><a name="pcbi.1002521-Shivers1" id="pcbi.1002521-Shivers1"></a>Shivers O (1996) A universal scripting framework or Lambda: the ultimate “little language”. Concurrency and Parallelism: Programming, Networking and Security. Springer-Verlag. pp. 254–265.  </li></ol></div>

</div></div>
<div style="display:none">
<div dojoType="ambra.widget.RegionalDialog" id="AnnotationDialog" style="padding:0;margin:0;">
  <div class="dialog annotate">
    <div class="tipu" id="dTipu"></div>
    <div class="comment">
      <h5><span>Post Your Note (For Public Viewing)</span></h5>
      <div class="posting pane">
        <form name="createAnnotation" id="createAnnotation" method="post" action="">
          <input type="hidden" name="target" value="info:doi/10.1371/journal.pcbi.1002521" />
          <input type="hidden" name="startPath" value="" />
          <input type="hidden" name="startOffset" value="" />
          <input type="hidden" name="endPath" value="" />
          <input type="hidden" name="endOffset" value="" />
          <input type="hidden" name="commentTitle" id="commentTitle" value="" />
          <input type="hidden" name="comment" id="commentArea" value="" />
          <input type="hidden" name="ciStatement" id="statementArea" value="" />
          <input type="hidden" name="isCompetingInterest" id="isCompetingInterest" value="false" />
          <input type="hidden" name="noteType" id="noteType" value="" />
          <fieldset>
            <legend>Compose Your Note</legend>
            <span id="submitMsg" class="error" style="display:none;"></span>
            <table class="layout">
              <tr>
                <td>
                  <label for="cNoteType">This is a </label><select name="cNoteType" id="cNoteType"><option value="note">note</option><option value="correction">correction</option></select>
                  <span id="cdls" style="visibility:hidden;margin-left:0.3em; white-space:nowrap;"><a href="/static/commentGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06?target=info%3Adoi%2F10.1371%2Fjournal.pcbi.1002521#corrections">What are corrections?</a></span>
                  <label for="cTitle"><span class="none">Enter your note title</span><!-- error message text <em>A title is required for all public notes</em>--></label>
                  <input type="text" name="cTitle" id="cTitle" value="Enter your note title..." class="title" alt="Enter your note title..." />
                  <label for="cArea"><span class="none">Enter your note</span><!-- error message text <em>Please enter your note</em>--></label>
                  <textarea name="cArea" id="cArea" value="Enter your note..." alt="Enter your note...">Enter your note...</textarea>
                  <input type="hidden" name="isPublic" value="true" />
                </td>
                <td>&nbsp;</td>
                <td class="coi">
                  <fieldset>
                    <legend>Declare any competing interests.</legend>
                    <ul>
                      <li><label><input id="isCompetingInterestNo" type="radio" checked="checked" name="competingInterest" value="false"  /> No, I don't have any competing interests to declare.</label></li>
                      <li><label><input id="isCompetingInterestYes" type="radio" name="competingInterest" value="true"  /> Yes, I have competing interests to declare (enter below):</label></li>
                    </ul>
                    <textarea name="ciStatementArea" id="ciStatementArea" disabled value="Enter your competing interests..." alt="Enter your competing interests...">Enter your competing interests...</textarea>
                  </fieldset>
                </td>
              </tr>
              <tr>
                <td colspan="3" class="buttons">
                  <input type="button" value="Cancel" title="Click to close and cancel" id="btn_cancel"/>
                  <input type="button" value="Submit" title="Click to post your note publicly" id="btn_post" class="primary"/>
                </td>
              </tr>
              <tr>
                <td colspan="3">
                  <p>Notes and Corrections can include the following markup tags:</p>
                  <p><strong>Emphasis:</strong> ''<em>italic</em>''&nbsp;&nbsp;'''<strong>bold</strong>'''&nbsp;&nbsp;'''''<strong><em>bold italic</em></strong>'''''</p>
                  <p><strong>Other:</strong> ^^<sup>superscript</sup>^^&nbsp;&nbsp;~~<sub>subscript</sub>~~</p>
                </td>
              </tr>
            </table>
          </fieldset>
        </form>
      </div>
    </div>
    <div class="tip" id="dTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.ContextAction" id="ContextActionDialog" class="contextActionDialog">
  <div class="dialog context">
    <div class="tipu" id="caTipu"></div>
    <div class="contextActionContent">
      <h5><img src="/images/tooltip_addannotation.gif" /> Add a note to this text.</h5>
      Please follow our <a href="/static/commentGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">guidelines for notes and comments</a> and review our <a href="/static/competing.action;jsessionid=734E990AC55F108B50EDD423F8918A06">competing interests policy</a>. Comments that do not conform to our guidelines will be promptly removed and the user account disabled. The following must be avoided:
      <ul>
        <li>Remarks that could be interpreted as allegations of misconduct</li>
        <li>Unsupported assertions or statements</li>
        <li>Inflammatory or insulting language</li>
      </ul>
      <form name="contextActionForm" id="contextActionForm" class="clearfix buttons" method="post" action="">
        <input type="button" name="Continue" value="Continue" id="ContextActionDialogContinueButton" onmouseup="ambra.displayAnnotationContext.startComment(event);" title="Add a note to this text" class="primary"/>
        <input type="button" name="Cancel" value="Cancel" id="ContextActionDialogCancelButton" onclick="return false;" onmouseup="ambra.displayAnnotationContext.cancelContext(event);" title="Close this Window"/>
      </form>
    </div>
    <div class="tip" id="caTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.ContextAction" id="ContextActionDialogNotLogged" class="contextActionDialog">
  <div class="dialog context">
    <div class="tipu" id="canlTipu"></div>
    <div class="contextActionContent">
      <h5><img src="/images/tooltip_addannotation.gif" /> Add a note to this text.</h5>
      You must be logged in to add a note to an article.
      You may log in by <a onmousedown="ambra.displayAnnotationContext.disconnect(event);" href="/user/secure/secureRedirect.action?goTo=%2Farticle%2FfetchArticle.action%3FarticleURI%3Dinfo%253Adoi%252F10.1371%252Fjournal.pcbi.1002521">clicking here</a> or <a href="#" onclick="return false;" onmouseup="ambra.displayAnnotationContext.cancelContext(event);">cancel this note</a>.
    </div>
    <div class="tip" id="canlTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.ContextAction" id="ContextActionDialogBadSelection" class="contextActionDialog">
  <div class="dialog context">
    <div class="tipu" id="canBDTipu"></div>
    <div class="contextActionContent">
      <h5 class="annotation icon"><img src="/images/tooltip_addannotation.gif" /> Add a note to this text.</h5>
      You cannot annotate this area of the document. <a href="#" onclick="return false;" onmouseup="ambra.displayAnnotationContext.cancelContext(event);">Close</a>
    </div>
    <div class="tip" id="canBDTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.ContextAction" id="ContextActionDialogBadRangeSelection" class="contextActionDialog">
  <div class="dialog context">
    <div class="tipu" id="canbrTipu"></div>
    <div class="contextActionContent">
      <h5><img src="/images/tooltip_addannotation.gif" /> Add a note to this text.</h5>
      You cannot create an annotation that spans different sections of the document; please adjust your selection.<br/>
      <a href="#" onclick="return false;" onmouseup="ambra.displayAnnotationContext.cancelContext(event);">Close</a>
    </div>
    <div class="tip" id="canbrTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.RegionalDialog" id="CommentDialog" style="padding:0;margin:0;">
  <div class="dialog preview">
    <div class="tipu" id="cTipu"></div>
    <div class="btn close" id="btn_close" title="Click to close"><a title="Click to close">Close</a></div>
    <div id="cmtContainer" class="comment">
      <h6 id="viewCmtTitle"></h6>
      <div class="detail" id="viewCmtDetail"></div>
      <div class="contentwrap" id="viewComment"></div>
      <div class="contentwrap" id="viewCIStatement"></div>
      <div class="detail" id="viewLink">
        <!--<a href="#" class="commentary icon" title="Click to view full thread and respond">View all responses</a>
        <a href="#" class="respond tooltip" title="Click to respond to this posting">Respond to this</a>-->
      </div>
    </div>
    <div class="tip" id="cTip"></div>
  </div>
</div>
<div dojoType="ambra.widget.RegionalDialog" id="CommentDialogMultiple" style="padding:0;margin:0;">
  <div class="dialog multiple preview">
    <div class="tipu" id="mTipu"></div>
    <div class="btn close" id="btn_close_multi" title="Click to close"><a title="Click to close">Close</a></div>
    <ol id="multilist"></ol>
    <br/>
    <div id="multidetail"></div>
    <div class="tip" id="mTip"></div>
  </div>
</div>


<div dojoType="dijit.Dialog" id="Rating">
  <div class="dialog annotate">
    <div class="tipu" id="dTipu"></div>
    <div class="comment">
      <h5><span>Rate This Article</span></h5>
      <div class="instructions">Please follow our <a  href="/static/ratingGuidelines.action;jsessionid=734E990AC55F108B50EDD423F8918A06">guidelines for rating</a> and review our <a href="/static/competing.action;jsessionid=734E990AC55F108B50EDD423F8918A06">competing interests policy</a>. Comments that do not conform to our guidelines will be promptly removed and the user account disabled. The following must be avoided:
        <ol>
          <li>Remarks that could be interpreted as allegations of misconduct</li>
          <li>Unsupported assertions or statements</li>
          <li>Inflammatory or insulting language</li>
        </ol>
      </div>
      <div class="posting pane">
        <form name="ratingForm" id="ratingForm" method="post" action="">
          <input type="hidden" name="articleURI" value="info:doi/10.1371/journal.pcbi.1002521" />  
          <input type="hidden" name="commentTitle" id="commentTitle" value="" />
          <input type="hidden" name="comment" id="commentArea" value="" />
          <input type="hidden" name="ciStatement" id="statementArea" value="" />
          <input type="hidden" name="isCompetingInterest" id="isCompetingInterest" value="" />
          <fieldset>
            <legend>Compose Your Annotation</legend>
            <span id="submitRatingMsg" class="error" style="display:none;"></span>
            <table class="layout">
              <tr>
                <td rowspan="2">
                  <label for="insight">Insight</label>
                  <ul class="star-rating rating edit" title="Rate insight" id="rateInsight">
                    <li class="current-rating pct0"></li>
                    <li><a href="javascript:void(0);" title="Bland" class="one-star" onclick="ambra.rating.setRatingCategory(this, 'insight', 1);">1</a></li>
                    <li><a href="javascript:void(0);" title="" class="two-stars" onclick="ambra.rating.setRatingCategory(this, 'insight', 2);">2</a></li>
                    <li><a href="javascript:void(0);" title="" class="three-stars" onclick="ambra.rating.setRatingCategory(this, 'insight', 3);">3</a></li>
                    <li><a href="javascript:void(0);" title="" class="four-stars" onclick="ambra.rating.setRatingCategory(this, 'insight', 4);">4</a></li>
                    <li><a href="javascript:void(0);" title="Profound" class="five-stars" onclick="ambra.rating.setRatingCategory(this, 'insight', 5);">5</a></li>
                  </ul>    
                  <input type="hidden" name="insight" title="insight" value="" />
                  <label for="reliability">Reliability</label>
                  <ul class="star-rating rating edit" title="Rate reliability" id="rateReliability">
                    <li class="current-rating pct0"></li>
                    <li><a href="javascript:void(0);" title="Tenuous" class="one-star" onclick="ambra.rating.setRatingCategory(this, 'reliability', 1);">1</a></li>
                    <li><a href="javascript:void(0);" title="" class="two-stars" onclick="ambra.rating.setRatingCategory(this, 'reliability', 2);">2</a></li>
                    <li><a href="javascript:void(0);" title="" class="three-stars" onclick="ambra.rating.setRatingCategory(this, 'reliability', 3);">3</a></li>
                    <li><a href="javascript:void(0);" title="" class="four-stars" onclick="ambra.rating.setRatingCategory(this, 'reliability', 4);">4</a></li>
                    <li><a href="javascript:void(0);" title="Unassailable" class="five-stars" onclick="ambra.rating.setRatingCategory(this, 'reliability', 5);">5</a></li>
                  </ul>    
                  <input type="hidden" name="reliability" title="reliability" value="" />
                  <label for="style">Style</label>
                  <ul class="star-rating rating edit" title="Rate style" id="rateStyle">
                    <li class="current-rating pct0"></li>
                    <li><a href="javascript:void(0);" title="Crude" class="one-star" onclick="ambra.rating.setRatingCategory(this, 'style', 1);">1</a></li>
                    <li><a href="javascript:void(0);" title="" class="two-stars" onclick="ambra.rating.setRatingCategory(this, 'style', 2);">2</a></li>
                    <li><a href="javascript:void(0);" title="" class="three-stars" onclick="ambra.rating.setRatingCategory(this, 'style', 3);">3</a></li>
                    <li><a href="javascript:void(0);" title="" class="four-stars" onclick="ambra.rating.setRatingCategory(this, 'style', 4);">4</a></li>
                    <li><a href="javascript:void(0);" title="Elegant" class="five-stars" onclick="ambra.rating.setRatingCategory(this, 'style', 5);">5</a></li>
                  </ul>    
                  <input type="hidden" name="style" title="style" value="" />
                  <label for="cTitle"><span class="none">Enter your comment title</span><!-- error message text <em>A title is required for all public annotations</em>--></label>
                  <input type="text" name="cTitle" id="cTitle" value="Enter your comment title..." class="title" alt="Enter your comment title..." />
                  <label for="cArea"><span class="none">Enter your comment</span><!-- error message text <em>Please enter your annotation</em>--></label>
                  <textarea name="cArea" id="cArea" value="Enter your comment..." alt="Enter your comment...">Enter your comment...</textarea>
                </td>
                <td rowspan="2">&nbsp;</td>
                <td class="coi">
                  <fieldset>
                    <legend>Declare any competing interests.</legend>
                    <ul>
                      <li><label><input id="isCompetingInterestNo" type="radio" name="competingInterest" value="false"  /> No, I don't have any competing interests to declare.</label></li>
                      <li><label><input id="isCompetingInterestYes" type="radio" name="competingInterest" value="true"  /> Yes, I have competing interests to declare (enter below):</label></li>
                    </ul>
                    <textarea name="ciStatementArea" id="ciStatementArea" disabled value="Enter your competing interests..." title="Enter your competing interests...">Enter your competing interests...</textarea>
                  </fieldset>
                </td>
              </tr>
              <tr>
                <td class="buttons">
                  <input type="button" value="Cancel" title="Click to close and cancel" id="btn_cancel_rating"/>
                  <input type="button" value="Submit" title="Click to post your annotation publicly" id="btn_post_rating" class="primary"/>
                </td>
              </tr>
              <tr>
                  <td colspan="3"><p>Ratings can include the following markup tags:</p>
                  <p><strong>Emphasis:</strong> ''<em>italic</em>''&nbsp;&nbsp;'''<strong>bold</strong>'''&nbsp;&nbsp;'''''<strong><em>bold italic</em></strong>'''''</p>
                  <p><strong>Other:</strong> ^^<sup>superscript</sup>^^&nbsp;&nbsp;~~<sub>subscript</sub>~~</p></td>
              </tr>
            </table>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>
<div dojoType="ambra.widget.LoadingCycle" id="LoadingCycle" class="loadingCycler">
  <img src="/images/loading.gif" width="58" height="58" title="Loading..." />
</div>
<div dojoType="dijit.Dialog" id="LightBox">

    <!-- start main window wrapper-->
    <div class="figure-window-wrapper">

      <!--start film strip Wrapper-->
      <div class="figure-window-nav-wrapper">
        <div id="figure-window-nav"></div>
      </div><!--end figure-window-nav-wrapper-->

      <!-- start figure container-->
      <div class="figure-window-container">

        <!-- start/end figure viewer-->
        <div id="figure-window-viewer">
          <img id="figure-window-img" class="large"/>
        </div>

        <!-- start/end figure doi-->
        <div id="figure-window-doi"></div>

        <!--start figure title-box-->
        <div id="figure-window-title-box" class="figure-window-title-less">
          <span id="figure-window-title"></span>
          <div id="figure-window-more" class="figure-window-more" onclick="return ambra.lightBox.showMoreOrLess();"></div>
          <div id="figure-window-description"></div>
        </div><!--end figure title-box-->

        <!--start figure download-->
        <div class="figure-window-download">
          <ul>
            <li class="download icon"><strong>Download:</strong>
              <a id="figure-window-ppt" title="Click to download PowerPoint slide of this image">PowerPoint
                slide</a> |
              <a id="figure-window-large" title="Click to download a larger version of this image">larger image
                (<span id="figure-window-large-size"></span>)</a> |
              <a id="figure-window-tiff" title="Click to download a original version of this image">original image
                (<span id="figure-window-tiff-size"></span>)</a>
            </li>
          </ul>
        </div><!--end figure download-->

        <!--start/end of close, context, next and previous button-->
        <div class="figure-window-close" onclick="return ambra.lightBox.hide();"></div>
        <div class="figure-window-context" onclick="return ambra.lightBox.showInContext();"></div>
        <div id="figure-window-previous" onclick="return ambra.lightBox.showPrevious();"></div>
        <div id="figure-window-next" onclick="return ambra.lightBox.showNext();"></div>

      </div><!--end figure-window-container-->

    </div><!--end figure-window-wrapper-->

</div><!--end dijit.Dialog-->
</div>
</div>
<!-- end : main contents -->

</div>
<!-- end : container -->	

<!-- begin : footer -->
<div id="ftr">
  <p><span>All site content, except where otherwise noted, is licensed under a <a href="http://creativecommons.org/licenses/by/2.5/" title="Creative Commons Attribution License 2.5" tabindex="200">Creative Commons Attribution License</a>.</span></p>
  <ul>
    <li><a href="/static/privacy.action;jsessionid=734E990AC55F108B50EDD423F8918A06" title="PLOS Privacy Statement" tabindex="501">Privacy Statement</a></li>
    <li><a href="/static/terms.action;jsessionid=734E990AC55F108B50EDD423F8918A06" title="PLOS Terms of Use" tabindex="502">Terms of Use</a></li>
    <li><a href="http://www.plos.org/advertise/" title="Advertise With PLOS" tabindex="503">Advertise</a></li>
    <li><a href="http://www.plos.org/about/media-inquiries/" title="PLOS Embargo Policy" tabindex="504">Media Inquiries</a></li>
    <li><a href="http://www.plos.org/publish/order-reprints/" title="PLOS in Print" tabindex="505">PLOS in Print</a></li>
    <li><a href="/static/sitemap.action;jsessionid=734E990AC55F108B50EDD423F8918A06" title="Site Map" tabindex="506">Site Map</a></li>
    <li><a href="http://www.plos.org" title="PLOS.org" tabindex="507">PLOS.org</a></li>
  </ul>
  <div class="powered">
  <ul>
    <li><a href="/static/releaseNotes.action" title="Ambra | Release Notes">Ambra 2.4.9</a></li>
    <li>Managed Colocation provided by <a href="http://www.isc.org/" title="Internet Systems Consortium">Internet Systems Consortium</a>.</li>
  </ul>
  </div>
</div>
<!-- end : footer -->
<script type="text/javascript">
  var _namespace="";
    var loggedIn = false;

  var almHost = "http://alm.plos.org";
  var solrHost = "http://api.plos.org/search";
  var pubGetHost = "http://pubget.com/widgetizer/links_hash";
  var appContext = "";

  // Safari v3.1.1 "console.debug" issue (http://trac.dojotoolkit.org/ticket/6849) workaround
  if (/3[\.0-9]+ Safari/.test(navigator.appVersion)) {
    window.console = {
      origConsole: window.console,
      log: function(s){ this.origConsole.log(s); },
      info: function(s){ this.origConsole.info(s); },
      error: function(s){ this.origConsole.error(s); },
      warn: function(s){ this.origConsole.warn(s); }
    };
  }

  var djConfig = {
    // don't debug for IE - as dojo's firebug lite module is error prone in IE
    isDebug: false,
    parseOnLoad: true
  };

  var bamGAID = 'UA-338393-1';
  var bamGAVPV = location.pathname + location.search + location.hash;
</script>
<script type="text/javascript" src="/javascript/dojo/dojo/dojo.js?v=pzlwVCPPo+oJC12upPgJrJ5EG_k"></script>
<script type="text/javascript" src="/javascript/dojo/dojo/ambra.js?v=Y8JM0CVD9YwjC99M_jvbcRTiGhY"></script>
<script type="text/javascript" src="/javascript/init_global.js?v=fF03pfG3r+Nkj_czZ8ORg8o5sNM"></script>
<script type="text/javascript" src="/javascript/init_article.js?v=qzBD_a7nKbeMM2xNUtB3vckN+Zc"></script>
<script type="text/javascript" src="/javascript/init_ratings.js?v=seKykuS0X33CQGS7Lj+8FtBy5Uw"></script>
<script type="text/javascript" src="/javascript/init_lightBox.js?v=vJRLPy7RRX8Zp31Ogcm3i+TA4f8"></script>
<script type="text/javascript" src="/javascript/init_article_body.js?v=YgFei2xCi50CahwaPbSsxUxUsmw"></script>
<script type="text/javascript" src="/javascript/init_article_rhc.js?v=djtbTMOagorKE6ZPrkCwufAfWWI"></script>
<script type="text/javascript" src="/javascript/alm.js?v=1tH9JZ8uDtXspXssGJDr8O+jBOs"></script>
<script type="text/javascript" src="/javascript/reporting/articleViewsCumulative.js?v=RQ+gCrcAl0dBeLbmokxgQZTGYYA"></script>
<script type="text/javascript" src="/javascript/check_twitter.js?v=Hc0sH1W9xIu0qhqxWPD4c1u50K4"></script>
<script type="text/javascript" src="/javascript/init_googleAnalytics.js?v=yCD4h9PHGI0dsefmuWDlMn7pHog"></script>

</body>
</html>

